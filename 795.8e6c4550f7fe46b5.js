"use strict";(self.webpackChunkappdemo_ng12=self.webpackChunkappdemo_ng12||[]).push([[795],{8795:($,m,d)=>{d.r(m),d.d(m,{BpManagementModule:()=>j});var a=d(9808),p=d(8266),o=d(4182),u=d(7224),g=d(8745),t=d(9863),B=d(9400),h=d(1914),_=d(4473),f=d(3320),b=d(636);function M(n,s){1&n&&(t.TgZ(0,"h4",19),t._uU(1,"New BP"),t.qZA())}function T(n,s){1&n&&(t.TgZ(0,"h4",19),t._uU(1,"Edit BP"),t.qZA())}function y(n,s){1&n&&(t.TgZ(0,"div",20)(1,"label"),t._uU(2,"Company Name"),t.qZA(),t._UZ(3,"input",21),t.qZA())}function P(n,s){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.COMPANY_ID),t.xp6(1),t.Oqu(e.COMPANY_NAME)}}function I(n,s){1&n&&(t.TgZ(0,"div",25),t._uU(1,"*Company required"),t.qZA())}function N(n,s){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,I,2,0,"div",24),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.f.COMPANY_ID.errors.required)}}const v=function(n){return{"is-invalid":n}};function x(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",11)(1,"label"),t._uU(2,"Company Name"),t.qZA(),t.TgZ(3,"div",12)(4,"select",22),t.NdJ("change",function(r){return t.CHM(e),t.oxw().onSelectClick(r.target.value)}),t.YNc(5,P,2,2,"option",14),t.qZA()(),t.YNc(6,N,2,1,"div",15),t.qZA()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngClass",t.VKq(3,v,e.submitted&&e.f.COMPANY_ID.errors)),t.xp6(1),t.Q6J("ngForOf",e.bplist),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.f.COMPANY_ID.errors)}}function U(n,s){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.BP_GROUP_ID),t.xp6(1),t.Oqu(e.BP_GROUP_NAME)}}function O(n,s){1&n&&(t.TgZ(0,"div",25),t._uU(1,"*bp group required"),t.qZA())}function Y(n,s){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,O,2,0,"div",24),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.BP_GROUP_ID.errors.required)}}function q(n,s){1&n&&t._UZ(0,"span")}const S=function(){return{standalone:!0}};let A=(()=>{class n{constructor(e,i,r,l,C,V,X){this.formBuilder=e,this.route=i,this.router=r,this.industryService=l,this.alertService=C,this.bpService=V,this.bpGroupService=X,this.subs=new g.Y,this.loading=!1,this.submitted=!1,this.bplist=null,this.industrylist=null,this.bpname=null,this.selectedIndustry=null,this.data=null,this.bpgroup=null}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({M_BP_ID:[0],COMPANY_ID:["",o.kI.required],COMPANY_NAME:[""],industry_list:[""],BP_GROUP_ID:["",o.kI.required]}),this.isAddMode||(this.subs.add(this.industryService.getById(this.id).pipe((0,u.P)()).subscribe(e=>this.form.patchValue(e))),this.subs.add(this.industryService.getbyindustry(this.id).pipe((0,u.P)()).subscribe(e=>{this.selectedIndustry=e}))),this.subs.add(this.bpService.getAllbyUser().subscribe(e=>this.bplist=e)),this.subs.add(this.industryService.getlistindustry().subscribe(e=>this.industrylist=e)),this.subs.add(this.bpGroupService.getAll().subscribe(e=>this.bpgroup=e))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.createIndustry())}createIndustry(){this.alertService.loading(),this.subs.add(this.bpService.create(this.form.value).pipe((0,u.P)()).subscribe({next:()=>{this.alertService.success(),this.router.navigate(["/bp-management"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}}))}onSelection(e){this.form.get("industry_list").setValue(e)}onSelectClick(e){this.bpname=this.bplist.filter(i=>i.COMPANY_ID===e)[0].COMPANY_NAME,this.form.get("COMPANY_NAME").setValue(this.bpname)}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(o.qu),t.Y36(p.gz),t.Y36(p.F0),t.Y36(B.L),t.Y36(h.c9),t.Y36(_.m),t.Y36(f._))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-bp-add-edit"]],decls:37,vars:17,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],["class","mr-40",4,"ngIf"],["routerLink","/bp-management",1,"main-btn","primary-btn","rounded-btn","btn-hover","btn-sm"],[1,"lni","lni-chevron-left","mr-5"],[1,"row"],[3,"formGroup","ngSubmit"],[1,"col-lg-6"],[1,"card-style","mb-30"],[1,"divider"],["class","input-style-1",4,"ngIf"],["class","select-style-1",4,"ngIf"],[1,"select-style-1"],[1,"select-position"],["formControlName","BP_GROUP_ID",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["bindLabel","INDUSTRY_NAME","placeholder","Select Industry","appendTo","body",3,"items","multiple","ngModel","ngModelOptions","change","ngModelChange"],["routerLink","/bp-management",1,"main-btn","primary-btn-outline","rounded-btn","btn-hover","btn-sm"],[1,"main-btn","primary-btn","rounded-btn","btn-hover","btn-sm",3,"disabled"],[1,"mr-40"],[1,"input-style-1"],["type","text","formControlName","COMPANY_NAME","disabled",""],["formControlName","COMPANY_ID",3,"ngClass","change"],[3,"value"],["style","color:red",4,"ngIf"],[2,"color","red"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,M,2,0,"h4",1),t.YNc(2,T,2,0,"h4",1),t.TgZ(3,"button",2),t._UZ(4,"i",3),t._uU(5,"Back"),t.qZA()(),t.TgZ(6,"div",4)(7,"form",5),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(8,"div",6)(9,"div",7)(10,"h5"),t._uU(11,"Business Partner"),t.qZA(),t.TgZ(12,"span",8),t._UZ(13,"hr"),t.qZA(),t.YNc(14,y,4,0,"div",9),t.YNc(15,x,7,5,"div",10),t.TgZ(16,"div",11)(17,"label"),t._uU(18,"Bp Group"),t.qZA(),t.TgZ(19,"div",12)(20,"select",13),t.YNc(21,U,2,2,"option",14),t.qZA()(),t.YNc(22,Y,2,1,"div",15),t.qZA(),t.TgZ(23,"div")(24,"label"),t._uU(25,"Industry"),t.qZA(),t.TgZ(26,"div",12)(27,"ng-select",16),t.NdJ("change",function(l){return i.onSelection(l)})("ngModelChange",function(l){return i.selectedIndustry=l}),t.qZA()()(),t.TgZ(28,"span",8),t._UZ(29,"hr"),t.qZA(),t.TgZ(30,"div")(31,"button",17),t._uU(32," Cancel "),t.qZA(),t._uU(33,"\xa0 "),t.TgZ(34,"button",18),t.YNc(35,q,1,0,"span",15),t._uU(36," \xa0Save\xa0 "),t.qZA()()()()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.isAddMode),t.xp6(1),t.Q6J("ngIf",!i.isAddMode),t.xp6(5),t.Q6J("formGroup",i.form),t.xp6(7),t.Q6J("ngIf",!i.isAddMode),t.xp6(1),t.Q6J("ngIf",i.isAddMode),t.xp6(5),t.Q6J("ngClass",t.VKq(14,v,i.submitted&&i.f.BP_GROUP_ID.errors)),t.xp6(1),t.Q6J("ngForOf",i.bpgroup),t.xp6(1),t.Q6J("ngIf",i.submitted&&i.f.BP_GROUP_ID.errors),t.xp6(5),t.Q6J("items",i.industrylist)("multiple",!0)("ngModel",i.selectedIndustry)("ngModelOptions",t.DdM(16,S)),t.xp6(7),t.Q6J("disabled",i.loading),t.xp6(1),t.Q6J("ngIf",i.loading))},directives:[a.O5,p.rH,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.EJ,a.mk,a.sg,o.YN,o.Kr,b.w9,o.On],styles:[""]}),n})(),J=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-bp-layout"]],decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"router-outlet")},directives:[p.lC],styles:[""]}),n})();var E=d(2454),D=d.n(E),c=d(8567),Z=d(3189);function Q(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e.INDUSTRY_NAME)}}function w(n,s){1&n&&(t.TgZ(0,"span"),t._UZ(1,"i",30),t.qZA())}function F(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",24)(2,"p"),t._uU(3),t.qZA()(),t.TgZ(4,"td",24)(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"td",24),t.YNc(8,Q,2,1,"p",19),t.qZA(),t.TgZ(9,"td")(10,"div",25)(11,"button",26),t._UZ(12,"i",27),t.qZA(),t._uU(13,"\xa0 "),t.TgZ(14,"button",28),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().confirmBox("delete",l)}),t.YNc(15,w,2,0,"span",29),t.qZA()()()()}if(2&n){const e=s.$implicit,i=t.oxw();t.xp6(3),t.Oqu(e.COMPANY_NAME),t.xp6(3),t.Oqu(i.setbpname(e.BP_GROUP_ID)),t.xp6(2),t.Q6J("ngForOf",e.industry_list),t.xp6(3),t.MGl("routerLink","edit/",e.M_BP_ID,""),t.xp6(3),t.Q6J("disabled",e.isDeleting),t.xp6(1),t.Q6J("ngIf",!e.isDeleting)}}const G=function(n,s){return{itemsPerPage:n,currentPage:s}},L=[{path:"bp-management",component:J,children:[{path:"",component:(()=>{class n{constructor(e,i,r){this.bpService=e,this.bpGroupService=i,this.alertService=r,this.subs=new g.Y,this.mbplist=null,this.groupPointBp=null,this.p=1,this.count=10,this.countuser=null,this.countdata=null}ngOnInit(){this.subs.add(this.bpService.getmbp().pipe((0,u.P)()).subscribe(e=>{this.mbplist=e,this.countdata=this.mbplist.length})),this.subs.add(this.bpGroupService.getAll().pipe((0,u.P)()).subscribe(e=>this.groupPointBp=e))}delete(e){this.alertService.loading();const i=this.mbplist.find(r=>r.M_BP_ID===e.M_BP_ID);this.subs.add(this.bpService.deletembp(e.M_BP_ID).pipe((0,u.P)()).subscribe(()=>{i.isDeleting=!0,this.mbplist=this.mbplist.filter(r=>r.M_BP_ID!==e.M_BP_ID),this.countdata=this.mbplist.length,this.alertService.success()},r=>{this.alertService.error(r)}))}setbpname(e){if(null!==this.groupPointBp)return null==e?null:this.groupPointBp.find(i=>i.BP_GROUP_ID===e).BP_GROUP_NAME}confirmBox(e,i){"delete"==e&&D().fire({title:"Are you sure want to delete?",text:i.COMPANY_NAME,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(r=>{r.value&&this.delete(i)})}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.m),t.Y36(f._),t.Y36(h.c9))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-bp-management"]],decls:51,vars:12,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[1,"mr-40"],["routerLink","add",1,"main-btn","primary-btn","btn-hover","btn-sm"],[1,"lni","lni-plus","mr-5"],[1,"tables-wrapper"],[1,"row"],[1,"col-lg-12"],[1,"card-style","mb-30"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","py-3"],[1,"left"],[1,"right"],[1,"table-search","d-flex"],["action","#"],["type","text","name","something","placeholder","Search...",3,"ngModel","ngModelChange"],[1,"lni","lni-search-alt"],[1,"table-wrapper","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"pt-10","d-flex","flex-wrap","justify-content-between"],[1,"text-sm","text-gray"],[1,"text-right"],[3,"pageChange"],[1,"min-width"],[1,"action"],[1,"text-primary",2,"cursor","pointer",3,"routerLink"],[1,"lni","lni-pencil-alt"],[1,"text-danger",3,"disabled","click"],[4,"ngIf"],[1,"lni","lni-trash-can"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"BP Management"),t.qZA(),t.TgZ(3,"button",2),t._UZ(4,"i",3),t._uU(5," Add "),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),t._UZ(11,"div",9),t.qZA(),t.TgZ(12,"div",10)(13,"div",11)(14,"p"),t._uU(15,"Show "),t.TgZ(16,"span"),t._uU(17,"10"),t.qZA(),t._uU(18," entries"),t.qZA()(),t.TgZ(19,"div",12)(20,"div",13)(21,"form",14)(22,"input",15),t.NdJ("ngModelChange",function(l){return i.filterdata=l}),t.qZA(),t.TgZ(23,"button"),t._UZ(24,"i",16),t.qZA()()()()(),t.TgZ(25,"div",17)(26,"table",18)(27,"thead")(28,"tr")(29,"th")(30,"h6"),t._uU(31,"COMPANY"),t.qZA()(),t.TgZ(32,"th")(33,"h6"),t._uU(34,"GROUP"),t.qZA()(),t.TgZ(35,"th")(36,"h6"),t._uU(37,"INDUSTRY"),t.qZA()(),t.TgZ(38,"th")(39,"h6"),t._uU(40,"ACTION"),t.qZA()()()(),t.TgZ(41,"tbody"),t.YNc(42,F,16,6,"tr",19),t.ALo(43,"paginate"),t.ALo(44,"filter"),t.qZA()()(),t.TgZ(45,"div",20)(46,"div",11)(47,"p",21),t._uU(48),t.qZA()(),t.TgZ(49,"div",22)(50,"pagination-controls",23),t.NdJ("pageChange",function(l){return i.p=l}),t.qZA()()()()()()()),2&e&&(t.xp6(22),t.Q6J("ngModel",i.filterdata),t.xp6(20),t.Q6J("ngForOf",t.xi3(43,3,t.xi3(44,6,i.mbplist,i.filterdata),t.WLB(9,G,i.count,i.p))),t.xp6(6),t.hij("Total ",i.countdata," BP"))},directives:[p.rH,o._Y,o.JL,o.F,o.Fj,o.JJ,o.On,a.sg,a.O5,c.LS],pipes:[c._s,Z.Z],styles:[""]}),n})()},{path:"add",component:A},{path:"edit/:id",component:A}]}];let R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.Bz.forChild(L)],p.Bz]}),n})(),j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[a.ez,o.UX,R,b.A0,o.u5,c.JX,Z.h]]}),n})()}}]);