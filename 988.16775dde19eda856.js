"use strict";(self.webpackChunkappdemo_ng12=self.webpackChunkappdemo_ng12||[]).push([[988],{4988:(Ee,f,d)=>{d.r(f),d.d(f,{UserManagementModule:()=>Ce});var o=d(4182),p=d(9808),m=d(8266),l=d(7224),A=d(8745),g=d(2340),e=d(9863),h=d(4883),v=d(1914),T=d(1382),C=d(4473),b=d(520);let M=(()=>{class i{constructor(t){this.http=t}getAll(){return this.http.get(`${g.N.apiUrl}/contact`)}getByID(t){return this.http.get(`${g.N.apiUrl}/contact/${t}`)}getByCompany(t){return this.http.get(`${g.N.apiUrl}/contact/getbycompany/${t}`)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(b.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Z=d(328),U=d(636);function I(i,s){1&i&&(e.TgZ(0,"h4",25),e._uU(1,"New Users"),e.qZA())}function S(i,s){1&i&&(e.TgZ(0,"h4",25),e._uU(1,"Edit Users"),e.qZA())}function q(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"label"),e._uU(2,"Company"),e.qZA(),e.TgZ(3,"ng-select",26),e.NdJ("change",function(r){return e.CHM(t),e.oxw().onCompanySelected(r)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("items",t.bp)("multiple",!1)}}function O(i,s){1&i&&(e.TgZ(0,"div",12)(1,"label"),e._uU(2,"Company"),e.qZA(),e._UZ(3,"input",27),e.qZA())}const P=function(){return{standalone:!0}};function y(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"label"),e._uU(2,"Email"),e.qZA(),e.TgZ(3,"ng-select",28),e.NdJ("change",function(r){return e.CHM(t),e.oxw().onSelection(r)})("ngModelChange",function(r){return e.CHM(t),e.oxw().selectemail=r}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("items",t.contact)("multiple",!1)("ngModel",t.selectemail)("ngModelOptions",e.DdM(4,P))}}function Y(i,s){1&i&&(e.TgZ(0,"div",12)(1,"label"),e._uU(2,"Email"),e.qZA(),e._UZ(3,"input",29),e.qZA())}function J(i,s){1&i&&(e.TgZ(0,"div",12)(1,"label"),e._uU(2,"USERNAME"),e.qZA(),e._UZ(3,"input",30),e.qZA())}function D(i,s){1&i&&(e.TgZ(0,"em"),e._uU(1,"(Default Password is email)"),e.qZA())}function R(i,s){1&i&&(e.TgZ(0,"div",34),e._uU(1,"Password is required"),e.qZA())}function w(i,s){1&i&&(e.TgZ(0,"div",34),e._uU(1,"Password must be at least 6 characters"),e.qZA())}function F(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,R,2,0,"div",33),e.YNc(2,w,2,0,"div",33),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.f.PASSWORD.errors.required),e.xp6(1),e.Q6J("ngIf",t.f.PASSWORD.errors.minlength)}}const c=function(i){return{"is-invalid":i}};function Q(i,s){if(1&i&&(e.TgZ(0,"div",12)(1,"label",31),e._uU(2," Password "),e.YNc(3,D,2,0,"em",11),e.qZA(),e._UZ(4,"input",32),e.YNc(5,F,3,2,"div",11),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.isAddMode),e.xp6(1),e.Q6J("ngClass",e.VKq(3,c,t.submitted&&t.f.PASSWORD.errors)),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.f.PASSWORD.errors)}}function L(i,s){1&i&&(e.TgZ(0,"div",34),e._uU(1,"*First Name required"),e.qZA())}function V(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,L,2,0,"div",33),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.f.FIRST_NAME.errors.required)}}function B(i,s){1&i&&(e.TgZ(0,"div",34),e._uU(1,"*Last Name required"),e.qZA())}function H(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,B,2,0,"div",33),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.f.LAST_NAME.errors.required)}}function k(i,s){1&i&&(e.TgZ(0,"div",34),e._uU(1,"*Phone No. required"),e.qZA())}function K(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,k,2,0,"div",33),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.f.PHONE.errors.required)}}function W(i,s){if(1&i&&(e.TgZ(0,"div")(1,"div",12)(2,"label"),e._uU(3,"First Name"),e.qZA(),e._UZ(4,"input",35),e.YNc(5,V,2,1,"div",11),e.qZA(),e.TgZ(6,"div",12)(7,"label"),e._uU(8,"Last Name"),e.qZA(),e._UZ(9,"input",36),e.YNc(10,H,2,1,"div",11),e.qZA(),e.TgZ(11,"div",12)(12,"label"),e._uU(13,"Phone No."),e.qZA(),e._UZ(14,"input",37),e.YNc(15,K,2,1,"div",11),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngClass",e.VKq(6,c,t.submitted&&t.f.FIRST_NAME.errors)),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.f.FIRST_NAME.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(8,c,t.submitted&&t.f.LAST_NAME.errors)),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.f.LAST_NAME.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(10,c,t.submitted&&t.f.PHONE.errors)),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.f.PHONE.errors)}}function $(i,s){1&i&&(e.TgZ(0,"div",34),e._uU(1,"*First Name required"),e.qZA())}function j(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,$,2,0,"div",33),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.f.FIRST_NAME.errors.required)}}function G(i,s){1&i&&(e.TgZ(0,"div",34),e._uU(1,"*Last Name required"),e.qZA())}function z(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,G,2,0,"div",33),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.f.LAST_NAME.errors.required)}}function X(i,s){1&i&&(e.TgZ(0,"div",34),e._uU(1,"*Phone No. required"),e.qZA())}function ee(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,X,2,0,"div",33),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.f.PHONE.errors.required)}}function te(i,s){if(1&i&&(e.TgZ(0,"div")(1,"div",12)(2,"label"),e._uU(3,"First Name"),e.qZA(),e._UZ(4,"input",38),e.YNc(5,j,2,1,"div",11),e.qZA(),e.TgZ(6,"div",12)(7,"label"),e._uU(8,"Last Name"),e.qZA(),e._UZ(9,"input",39),e.YNc(10,z,2,1,"div",11),e.qZA(),e.TgZ(11,"div",12)(12,"label"),e._uU(13,"Phone No."),e.qZA(),e._UZ(14,"input",40),e.YNc(15,ee,2,1,"div",11),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngClass",e.VKq(6,c,t.submitted&&t.f.FIRST_NAME.errors)),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.f.FIRST_NAME.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(8,c,t.submitted&&t.f.LAST_NAME.errors)),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.f.LAST_NAME.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(10,c,t.submitted&&t.f.PHONE.errors)),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.f.PHONE.errors)}}function ie(i,s){1&i&&(e.TgZ(0,"div",46),e._UZ(1,"div",47),e.qZA())}function ne(i,s){1&i&&(e.TgZ(0,"div",48),e._uU(1," Image Uploaded Succesfuly!"),e.qZA())}function se(i,s){1&i&&(e.TgZ(0,"div",49),e._uU(1," Image Upload Failed!"),e.qZA())}const re=function(i){return{"background-image":i}};function oe(i,s){if(1&i&&(e.TgZ(0,"div",41),e._UZ(1,"div",42),e.YNc(2,ie,2,0,"div",43),e.YNc(3,ne,2,0,"div",44),e.YNc(4,se,2,0,"div",45),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Gre("img-preview","fail"===t.selectedFile.status?"-error":"",""),e.Q6J("ngStyle",e.VKq(7,re,"url("+t.selectedFile.src+")")),e.xp6(1),e.Q6J("ngIf",t.selectedFile.pending),e.xp6(1),e.Q6J("ngIf","ok"===t.selectedFile.status),e.xp6(1),e.Q6J("ngIf","fail"===t.selectedFile.status)}}function de(i,s){1&i&&(e.TgZ(0,"div",34),e._uU(1,"*Picture required"),e.qZA())}function ae(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,de,2,0,"div",33),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.PICTURE.errors.required)}}function le(i,s){1&i&&(e.TgZ(0,"div",34),e._uU(1,"*Discord ID required"),e.qZA())}function ce(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,le,2,0,"div",33),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.DISCORD_ID.errors.required)}}function ue(i,s){if(1&i&&(e.TgZ(0,"option",50),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t.RULE_ID),e.xp6(1),e.Oqu(t.RULE_NAME)}}function pe(i,s){1&i&&e._UZ(0,"span")}class me{constructor(s,t){this.src=s,this.file=t,this.pending=!1,this.status="init"}}let N=(()=>{class i{constructor(t,n,r,a,u,Ze,Ue,Ne,xe){this.formBuilder=t,this.route=n,this.router=r,this.usersService=a,this.alertService=u,this.ruleManagementService=Ze,this.bpService=Ue,this.contactService=Ne,this.imageService=xe,this.subs=new A.Y,this.loading=!1,this.submitted=!1,this.selectedBPName=null,this.rules=null,this.bp=null,this.contact=null,this.apiurl=g.N.apiUrl,this.selectemail=null,this.isVTI=!1,this.isSuperUser=!1,this.rulelocal=JSON.parse(localStorage.getItem("2"))}ngOnInit(){this.rulelocal.ISSUPERADMIN&&(this.isSuperUser=!0),this.id=this.route.snapshot.params.id,this.isAddMode=!this.id;const t=[o.kI.minLength(6)];this.isAddMode&&t.push(o.kI.required),this.form=this.formBuilder.group({USERNAME:["",o.kI.required],PASSWORD:["",t],FIRST_NAME:["",o.kI.required],LAST_NAME:["",o.kI.required],COMPANY_ID:["",o.kI.required],COMPANY_NAME:["",o.kI.required],PHONE:["",o.kI.required],BIO:["",o.kI.required],PICTURE:["",o.kI.required],RULE_ID:["",o.kI.required],DISCORD_ID:["",o.kI.required]}),this.isAddMode||this.subs.add(this.usersService.getById(this.id).pipe((0,l.P)()).subscribe(n=>{this.form.patchValue(n)})),this.subs.add(this.ruleManagementService.getAll().subscribe(n=>this.rules=n)),this.subs.add(this.bpService.getAll().subscribe(n=>this.bp=n))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?this.createUser():this.updateUser())}onCompanySelected(t){37891===parseInt(t.COMPANY_ID)&&1==this.isSuperUser?(this.isVTI=!0,this.form.get("COMPANY_ID").setValue(t.COMPANY_ID),this.form.get("COMPANY_NAME").setValue(t.COMPANY_NAME),this.setEmptyvalue()):(this.isVTI=!1,this.subs.add(this.contactService.getByCompany(t.COMPANY_ID).subscribe(n=>this.contact=n)),this.form.get("COMPANY_ID").setValue(t.COMPANY_ID),this.form.get("COMPANY_NAME").setValue(t.COMPANY_NAME),this.setEmptyvalue())}onSelection(t){1==t.CONTACT_NAME.split(" ").length?this.form.get("FIRST_NAME").setValue(t.CONTACT_NAME):this.form.get("FIRST_NAME").setValue(t.CONTACT_NAME.substr(0,t.CONTACT_NAME.indexOf(" "))),""!=t.CONTACT_NAME.substr(t.CONTACT_NAME.indexOf(" ")+1)?this.form.get("LAST_NAME").setValue(t.CONTACT_NAME.substr(t.CONTACT_NAME.indexOf(" ")+1)):this.form.get("LAST_NAME").setValue(t.CONTACT_NAME.substr(0,t.CONTACT_NAME.indexOf(" "))),this.form.get("PASSWORD").setValue(t.EMAIL),this.form.get("USERNAME").setValue(t.EMAIL),this.form.get("PHONE").setValue(t.PHONE01)}createUser(){this.alertService.loading(),this.subs.add(this.usersService.register(this.form.value).pipe((0,l.P)()).subscribe({next:()=>{this.alertService.success(),this.router.navigate(["../"],{relativeTo:this.route})},error:t=>{this.alertService.error(t),this.loading=!1}}))}updateUser(){this.alertService.loading(),this.subs.add(this.usersService.update(this.id,this.form.value).pipe((0,l.P)()).subscribe({next:()=>{this.alertService.success(),this.router.navigate(["../../"],{relativeTo:this.route})},error:t=>{this.alertService.error(t),this.loading=!1}}))}onSuccess(){this.selectedFile.pending=!1,this.selectedFile.status="ok"}onError(){this.selectedFile.pending=!1,this.selectedFile.status="fail",this.selectedFile.src=""}processFile(t){const n=t.files[0],r=new FileReader;this.form.value.PICTURE&&this.imageService.deleteImage(this.form.value.PICTURE).pipe((0,l.P)()).subscribe(),r.addEventListener("load",a=>{this.selectedFile=new me(a.target.result,n),this.imageService.uploadImage(this.selectedFile.file).subscribe(u=>{this.form.get("PICTURE").setValue(u.filename),this.onSuccess()},u=>{this.onError()})}),r.readAsDataURL(n)}setEmptyvalue(){this.form.get("FIRST_NAME").setValue(""),this.form.get("LAST_NAME").setValue(""),this.form.get("PHONE").setValue(""),this.form.get("BIO").setValue(""),this.form.get("DISCORD_ID").setValue(""),this.form.get("PASSWORD").setValue(""),this.selectemail=""}ngOnDestroy(){this.subs.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(o.qu),e.Y36(m.gz),e.Y36(m.F0),e.Y36(h.x),e.Y36(v.c9),e.Y36(T.P),e.Y36(C.m),e.Y36(M),e.Y36(Z.C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:55,vars:26,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],["class","mr-40",4,"ngIf"],["routerLink","/user-management",1,"main-btn","primary-btn","rounded-btn","btn-hover","btn-sm"],[1,"lni","lni-chevron-left","mr-5"],[1,"row"],[3,"formGroup","ngSubmit"],[1,"col-lg-6"],[1,"card-style","mb-30"],[1,"divider"],["class","select-style-1",4,"ngIf"],["class","input-style-1",4,"ngIf"],[4,"ngIf"],[1,"input-style-1"],["formControlName","BIO","placeholder","Message","rows","5",3,"ngClass"],["type","file","accept","image/*",3,"change"],["imageInput",""],["class","img-preview-container",4,"ngIf"],["type","text","formControlName","PICTURE","disabled","",3,"ngClass"],["type","number","formControlName","DISCORD_ID",3,"ngClass"],[1,"select-style-1"],[1,"select-position"],["formControlName","RULE_ID"],[3,"value",4,"ngFor","ngForOf"],["routerLink","/user-management",1,"main-btn","primary-btn-outline","rounded-btn","btn-hover","btn-sm"],[1,"main-btn","primary-btn","rounded-btn","btn-hover","btn-sm",3,"disabled"],[1,"mr-40"],["bindLabel","COMPANY_NAME","placeholder","Search Company","appendTo","body",3,"items","multiple","change"],["type","text","formControlName","COMPANY_NAME","disabled",""],["bindLabel","EMAIL","placeholder","Search Email","appendTo","body",3,"items","multiple","ngModel","ngModelOptions","change","ngModelChange"],["type","text","formControlName","USERNAME"],["type","text","formControlName","USERNAME","disabled",""],["for","PASSWORD"],["type","password","formControlName","PASSWORD",3,"ngClass"],["style","color:red",4,"ngIf"],[2,"color","red"],["type","text","formControlName","FIRST_NAME",3,"ngClass"],["type","text","formControlName","LAST_NAME",3,"ngClass"],["type","text","formControlName","PHONE",3,"ngClass"],["type","text","formControlName","FIRST_NAME","disabled","",3,"ngClass"],["type","text","formControlName","LAST_NAME","disabled","",3,"ngClass"],["type","text","formControlName","PHONE","disabled","",3,"ngClass"],[1,"img-preview-container"],[3,"ngStyle"],["class","img-loading-overlay",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"img-loading-overlay"],[1,"img-spinning-circle"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[3,"value"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"div",0),e.YNc(1,I,2,0,"h4",1),e.YNc(2,S,2,0,"h4",1),e.TgZ(3,"button",2),e._UZ(4,"i",3),e._uU(5,"Back"),e.qZA()(),e.TgZ(6,"div",4)(7,"form",5),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(8,"div",6)(9,"div",7)(10,"h5"),e._uU(11,"User Description"),e.qZA(),e.TgZ(12,"span",8),e._UZ(13,"hr"),e.qZA(),e.YNc(14,q,4,2,"div",9),e.YNc(15,O,4,0,"div",10),e.YNc(16,y,4,5,"div",9),e.YNc(17,Y,4,0,"div",10),e.YNc(18,J,4,0,"div",10),e.YNc(19,Q,6,5,"div",10),e.YNc(20,W,16,12,"div",11),e.YNc(21,te,16,12,"div",11),e.TgZ(22,"div",12)(23,"label"),e._uU(24,"Bio"),e.qZA(),e._UZ(25,"textarea",13),e.qZA(),e.TgZ(26,"div",12)(27,"label"),e._uU(28,"Select Image"),e.qZA(),e.TgZ(29,"input",14,15),e.NdJ("change",function(){e.CHM(r);const u=e.MAs(30);return n.processFile(u)}),e.qZA()(),e.YNc(31,oe,5,9,"div",16),e.TgZ(32,"div",12)(33,"label"),e._uU(34,"Picture"),e.qZA(),e._UZ(35,"input",17),e.YNc(36,ae,2,1,"div",11),e.qZA(),e.TgZ(37,"div",12)(38,"label"),e._uU(39,"Discord ID"),e.qZA(),e._UZ(40,"input",18),e.YNc(41,ce,2,1,"div",11),e.qZA(),e.TgZ(42,"div",19)(43,"label"),e._uU(44,"Role"),e.qZA(),e.TgZ(45,"div",20)(46,"select",21),e.YNc(47,ue,2,2,"option",22),e.qZA()()(),e.TgZ(48,"div")(49,"button",23),e._uU(50," Cancel "),e.qZA(),e._uU(51,"\xa0 "),e.TgZ(52,"button",24),e.YNc(53,pe,1,0,"span",11),e._uU(54," \xa0Save\xa0 "),e.qZA()()()()()()}2&t&&(e.xp6(1),e.Q6J("ngIf",n.isAddMode),e.xp6(1),e.Q6J("ngIf",!n.isAddMode),e.xp6(5),e.Q6J("formGroup",n.form),e.xp6(7),e.Q6J("ngIf",n.isAddMode),e.xp6(1),e.Q6J("ngIf",!n.isAddMode),e.xp6(1),e.Q6J("ngIf",n.isAddMode&&!n.isVTI),e.xp6(1),e.Q6J("ngIf",n.isVTI),e.xp6(1),e.Q6J("ngIf",!n.isAddMode),e.xp6(1),e.Q6J("ngIf",n.isAddMode),e.xp6(1),e.Q6J("ngIf",n.isVTI),e.xp6(1),e.Q6J("ngIf",!n.isVTI),e.xp6(4),e.Q6J("ngClass",e.VKq(20,c,n.submitted&&n.f.BIO.errors)),e.xp6(6),e.Q6J("ngIf",n.selectedFile),e.xp6(4),e.Q6J("ngClass",e.VKq(22,c,n.submitted&&n.f.PICTURE.errors)),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.f.PICTURE.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(24,c,n.submitted&&n.f.DISCORD_ID.errors)),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.f.DISCORD_ID.errors),e.xp6(6),e.Q6J("ngForOf",n.rules),e.xp6(5),e.Q6J("disabled",n.loading),e.xp6(1),e.Q6J("ngIf",n.loading))},directives:[p.O5,m.rH,o._Y,o.JL,o.sg,U.w9,o.Fj,o.JJ,o.u,o.On,p.mk,p.PC,o.wV,o.EJ,p.sg,o.YN,o.Kr],styles:['.image-upload-container[_ngcontent-%COMP%]{cursor:pointer}.img-preview-container[_ngcontent-%COMP%]{background-color:#f7f7f7;position:relative}.img-preview-container[_ngcontent-%COMP%]   .img-preview[_ngcontent-%COMP%]{background:center center no-repeat;background-size:contain;height:116px;width:116px}.img-preview-container[_ngcontent-%COMP%]   .img-preview-error[_ngcontent-%COMP%]{display:none}.img-loading-overlay[_ngcontent-%COMP%]{background-color:#000;bottom:0;left:0;opacity:.2;position:absolute;right:0;top:0}.img-spinning-circle[_ngcontent-%COMP%]{display:inline-block;width:64px;height:64px;margin:auto;position:absolute;top:0;left:0;bottom:0;right:0}.img-spinning-circle[_ngcontent-%COMP%]:after{content:" ";display:block;width:46px;height:46px;margin:1px;border-radius:50%;border:5px solid #fff;border-color:#fff transparent #fff transparent;animation:lds-dual-ring 1.2s linear infinite}@keyframes lds-dual-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),i})(),ge=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[m.lC],encapsulation:2}),i})();var _e=d(2454),x=d.n(_e),_=d(8567),E=d(3189);function fe(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",39),e.qZA())}function Ae(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",24)(2,"div",25)(3,"div",26),e._UZ(4,"img",27),e.qZA(),e.TgZ(5,"div",28)(6,"p")(7,"a",29),e._uU(8),e.qZA()()()()(),e.TgZ(9,"td",24)(10,"p")(11,"a",30),e._uU(12),e.qZA()()(),e.TgZ(13,"td",24)(14,"p"),e._uU(15),e.qZA()(),e.TgZ(16,"td",24)(17,"p")(18,"a",31),e._uU(19),e.qZA()()(),e.TgZ(20,"td")(21,"div",32)(22,"button",33),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().confirmBox("confirm",a)}),e._UZ(23,"i",34),e.qZA(),e._uU(24,"\xa0 "),e.TgZ(25,"button",35),e._UZ(26,"i",36),e.qZA(),e._uU(27,"\xa0 "),e.TgZ(28,"button",37),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().confirmBox("delete",a)}),e.YNc(29,fe,2,0,"span",38),e.qZA()()()()}if(2&i){const t=s.$implicit,n=e.oxw();e.xp6(4),e.s9C("src",n.apiurl+t.PICTURE,e.LSH),e.xp6(3),e.MGl("href","/profile/",t.USERNAME,"",e.LSH),e.xp6(1),e.AsE("",t.FIRST_NAME," ",t.LAST_NAME,""),e.xp6(3),e.MGl("title","ID: ",t.COMPANY_ID,""),e.xp6(1),e.Oqu(t.COMPANY_NAME),e.xp6(3),e.Oqu(t.PHONE),e.xp6(4),e.Oqu(t.USERNAME),e.xp6(6),e.MGl("routerLink","edit/",t.ID,""),e.xp6(3),e.Q6J("disabled",t.isDeleting),e.xp6(1),e.Q6J("ngIf",!t.isDeleting)}}const he=function(i,s){return{itemsPerPage:i,currentPage:s}},ve=[{path:"user-management",component:ge,children:[{path:"",component:(()=>{class i{constructor(t,n,r,a,u){this.usersService=t,this.rulesService=n,this.bpService=r,this.imageService=a,this.alertService=u,this.subs=new A.Y,this.users=null,this.rules=null,this.bp=null,this.p=1,this.count=10,this.countdata=null,this.apiurl=g.N.apiUrl+"/image/"}ngOnInit(){this.subs.add(this.usersService.getAll().pipe((0,l.P)()).subscribe(t=>{this.users=t,this.countdata=this.users.length})),this.subs.add(this.rulesService.getAll().pipe((0,l.P)()).subscribe(t=>this.rules=t)),this.subs.add(this.bpService.getAll().pipe((0,l.P)()).subscribe(t=>this.bp=t))}deleteUser(t){this.alertService.loading();const n=this.users.find(r=>r.ID===t.ID);this.subs.add(this.usersService.delete(t.ID).pipe((0,l.P)()).subscribe(()=>{n.isDeleting=!0,this.users=this.users.filter(r=>r.ID!==t.ID),this.countdata=this.users.length,this.alertService.success(),this.subs.add(this.imageService.deleteImage(n.PICTURE).pipe((0,l.P)()).subscribe())},r=>{this.alertService.error(r)}))}roleIdToName(t){let n;try{n=this.rules.find(r=>r.ROLE_ID==t).ROLE_NAME}catch(r){}finally{return n}}companyIdToName(t){let n;try{n=this.bp.find(r=>r.COMPANY_ID=t).COMPANY_NAME}catch(r){}finally{return n}}resendEmail(t){t.PASSWORD=t.USERNAME,this.alertService.loading(),this.subs.add(this.usersService.resendemail(t).pipe((0,l.P)()).subscribe(()=>{this.alertService.success()},n=>{this.alertService.error(n)}))}confirmBox(t,n){"delete"==t&&x().fire({title:"Are you sure want to delete?",text:n.USERNAME,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(r=>{r.value&&this.deleteUser(n)}),"confirm"==t&&x().fire({title:"Are you sure want to resend email?",text:"this action will reset password "+n.USERNAME,icon:"question",showCancelButton:!0,confirmButtonText:"Yes, send email!",cancelButtonText:"Cancel"}).then(r=>{r.value&&this.resendEmail(n)})}ngOnDestroy(){this.subs.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.x),e.Y36(T.P),e.Y36(C.m),e.Y36(Z.C),e.Y36(v.c9))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:54,vars:12,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[1,"mr-40"],["routerLink","add",1,"main-btn","primary-btn","btn-hover","btn-sm"],[1,"lni","lni-plus","mr-5"],[1,"tables-wrapper"],[1,"row"],[1,"col-lg-12"],[1,"card-style","mb-30"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","py-3"],[1,"left"],[1,"right"],[1,"table-search","d-flex"],["action","#"],["type","text","name","something","placeholder","Search...",3,"ngModel","ngModelChange"],[1,"lni","lni-search-alt"],[1,"table-wrapper","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"pt-10","d-flex","flex-wrap","justify-content-between"],[1,"text-sm","text-gray"],[1,"text-right"],[3,"pageChange"],[1,"min-width"],[1,"lead"],[1,"lead-image"],["alt","",3,"src"],[1,"lead-text"],[3,"href"],["data-toggle","tooltip",2,"cursor","pointer",3,"title"],["data-toggle","tooltip"],[1,"action"],[1,"text-primary",2,"cursor","pointer",3,"click"],[1,"lni","lni-reply"],[1,"text-primary",2,"cursor","pointer",3,"routerLink"],[1,"lni","lni-pencil-alt"],[1,"text-danger",3,"disabled","click"],[4,"ngIf"],[1,"lni","lni-trash-can"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Users Management"),e.qZA(),e.TgZ(3,"button",2),e._UZ(4,"i",3),e._uU(5," Add "),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),e._UZ(11,"div",9),e.qZA(),e.TgZ(12,"div",10)(13,"div",11)(14,"p"),e._uU(15,"Show "),e.TgZ(16,"span"),e._uU(17,"10"),e.qZA(),e._uU(18," entries"),e.qZA()(),e.TgZ(19,"div",12)(20,"div",13)(21,"form",14)(22,"input",15),e.NdJ("ngModelChange",function(a){return n.filterdata=a}),e.qZA(),e.TgZ(23,"button"),e._UZ(24,"i",16),e.qZA()()()()(),e.TgZ(25,"div",17)(26,"table",18)(27,"thead")(28,"tr")(29,"th")(30,"h6"),e._uU(31,"Name"),e.qZA()(),e.TgZ(32,"th")(33,"h6"),e._uU(34,"Company"),e.qZA()(),e.TgZ(35,"th")(36,"h6"),e._uU(37,"Phone No"),e.qZA()(),e.TgZ(38,"th")(39,"h6"),e._uU(40,"Email"),e.qZA()(),e.TgZ(41,"th")(42,"h6"),e._uU(43,"Action"),e.qZA()()()(),e.TgZ(44,"tbody"),e.YNc(45,Ae,30,11,"tr",19),e.ALo(46,"paginate"),e.ALo(47,"filter"),e.qZA()()(),e.TgZ(48,"div",20)(49,"div",11)(50,"p",21),e._uU(51),e.qZA()(),e.TgZ(52,"div",22)(53,"pagination-controls",23),e.NdJ("pageChange",function(a){return n.p=a}),e.qZA()()()()()()()),2&t&&(e.xp6(22),e.Q6J("ngModel",n.filterdata),e.xp6(23),e.Q6J("ngForOf",e.xi3(46,3,e.xi3(47,6,n.users,n.filterdata),e.WLB(9,he,n.count,n.p))),e.xp6(6),e.hij("Total ",n.countdata," users"))},directives:[m.rH,o._Y,o.JL,o.F,o.Fj,o.JJ,o.On,p.sg,p.O5,_.LS],pipes:[_._s,E.Z],encapsulation:2}),i})()},{path:"add",component:N},{path:"edit/:id",component:N}]}];let Te=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[m.Bz.forChild(ve)],m.Bz]}),i})(),Ce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,o.UX,Te,U.A0,o.u5,_.JX,E.h]]}),i})()}}]);