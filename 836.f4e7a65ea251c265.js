"use strict";(self.webpackChunkappdemo_ng12=self.webpackChunkappdemo_ng12||[]).push([[836],{2836:(K,A,l)=>{l.r(A),l.d(A,{TargetModule:()=>X});var u=l(9808),m=l(8266),s=l(4182),c=l(7224),_=l(8745),E=l(2454),N=l.n(E),t=l(9863),h=l(2340),U=l(520);let v=(()=>{class i{constructor(e){this.http=e}getAll(e){return this.http.get(`${h.N.apiUrl}/target/getall/${e}`)}getById(e){return this.http.get(`${h.N.apiUrl}/target/getdetail/${e}`)}getByCompanyId(e,r){return this.http.get(`${h.N.apiUrl}/target/getdetailbycompany/${e}/${r}`)}create(e){return this.http.post(`${h.N.apiUrl}/target/create`,e)}update(e,r){return this.http.put(`${h.N.apiUrl}/target/update/${e}`,r)}delete(e){return this.http.delete(`${h.N.apiUrl}/target/delete/${e}`)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(U.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Y=l(1914),R=l(4473),x=l(4916),b=l(636);function M(i,n){1&i&&(t.TgZ(0,"h4",30),t._uU(1,"New Target"),t.qZA())}function q(i,n){1&i&&(t.TgZ(0,"h4",30),t._uU(1,"Edit Target"),t.qZA())}function S(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",24)(1,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().newtargetcompany()}),t._UZ(2,"i",32),t._uU(3,"New Target"),t.qZA()()}}function O(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",17)(1,"label"),t._uU(2,"Company"),t.qZA(),t.TgZ(3,"ng-select",33),t.NdJ("change",function(o){return t.CHM(e),t.oxw().onCompanySelected(o)}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("items",e.bplist)("multiple",!1)}}function I(i,n){1&i&&(t.TgZ(0,"div",14)(1,"label"),t._uU(2,"Company"),t.qZA(),t._UZ(3,"input",34),t.qZA())}function P(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",17)(1,"label"),t._uU(2,"Product"),t.qZA(),t.TgZ(3,"ng-select",35),t.NdJ("change",function(o){return t.CHM(e),t.oxw().onProductSelected(o)}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("items",e.productlist)("multiple",!1)}}function J(i,n){1&i&&(t.TgZ(0,"div",14)(1,"label"),t._uU(2,"Product Name"),t.qZA(),t._UZ(3,"input",36),t.qZA())}function w(i,n){1&i&&(t.TgZ(0,"div",38),t._uU(1,"*Target required"),t.qZA())}function D(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,w,2,0,"div",37),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.TARGET.errors.required)}}function F(i,n){if(1&i&&(t.TgZ(0,"option",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.s9C("value",e.YEAR),t.xp6(1),t.Oqu(e.YEAR)}}function Q(i,n){1&i&&(t.TgZ(0,"div",38),t._uU(1,"*target required"),t.qZA())}function G(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Q,2,0,"div",37),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.YEAR.errors.required)}}function L(i,n){1&i&&t._UZ(0,"span")}function B(i,n){if(1&i&&(t.TgZ(0,"option",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.s9C("value",e.YEAR),t.xp6(1),t.Oqu(e.YEAR)}}function $(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",40)(2,"p")(3,"button",41),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().clickedit(a.TARGET_ID)}),t._uU(4),t.qZA()()(),t.TgZ(5,"td",40)(6,"p"),t._uU(7),t.qZA()(),t.TgZ(8,"td")(9,"div",42)(10,"button",43),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().confirmBox("delete",a)}),t.TgZ(11,"span"),t._UZ(12,"i",44),t.qZA()()()()()}if(2&i){const e=n.$implicit,r=t.oxw();t.xp6(4),t.hij(" ",e.PRODUCT_NAME," "),t.xp6(3),t.Oqu(r.formatRupiah(e.TARGET,"Rp. "))}}const y=function(i){return{"is-invalid":i}};let Z=(()=>{class i{constructor(e,r,o,a,p,d,g,f){this.formBuilder=e,this.route=r,this.router=o,this.targetService=a,this.alertService=p,this.bpService=d,this.productService=g,this.datepipe=f,this.subs=new _.Y,this.loading=!1,this.submitted=!1,this.data=null,this.bplist=null,this.productlist=null,this.targetlistbycompany=null,this.currDate=new Date,this.newtarget=!1,this.years=[{YEAR:"2022"},{YEAR:"2023"},{YEAR:"2024"},{YEAR:"2025"}],this.totaltarget=0,this.company_name=null}ngOnInit(){this.companyid=this.route.snapshot.params.companyid,this.isAddMode=!this.companyid,this.form=this.formBuilder.group({COMPANY_ID:["",s.kI.required],COMPANY_NAME:["",s.kI.required],PRODUCT_ID:["",s.kI.required],PRODUCT_NAME:["",s.kI.required],TARGET:[0,s.kI.required],TOTAL:[0],YEAR:[""]}),this.isAddMode||this.subs.add(this.targetService.getByCompanyId(this.companyid,this.datepipe.transform(this.currDate,"yyyy").toString()).pipe((0,c.P)()).subscribe(e=>{this.targetlistbycompany=e,this.company_name=this.targetlistbycompany[0].COMPANY_NAME,this.targetlistbycompany.forEach(r=>{this.totaltarget=this.totaltarget+parseInt(r.TARGET)}),this.form.patchValue(e[0]),this.form.get("YEAR").setValue(this.datepipe.transform(e[0].YEAR,"yyyy"))})),this.subs.add(this.bpService.getAll().pipe((0,c.P)()).subscribe(e=>this.bplist=e)),this.subs.add(this.productService.getProduct().pipe((0,c.P)()).subscribe(e=>{this.productlist=e,this.productlist.push({PRODUCT_ID:"1",PRODUCT_NAME:"Other"})}))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?this.create():this.update())}create(){this.alertService.loading(),this.subs.add(this.targetService.create(this.form.value).pipe((0,c.P)()).subscribe({next:()=>{this.alertService.success(),this.router.navigate(["/target"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}}))}update(){this.alertService.loading(),this.subs.add(this.targetService.update(this.id,this.form.value).pipe((0,c.P)()).subscribe({next:()=>{this.alertService.success(),this.router.navigate(["/target"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}}))}delete(e){this.alertService.loading();const r=this.targetlistbycompany.find(o=>o.TARGET_ID===e.TARGET_ID);this.subs.add(this.targetService.delete(e.TARGET_ID).pipe((0,c.P)()).subscribe(()=>{r.isDeleting=!0,this.targetlistbycompany=this.targetlistbycompany.filter(o=>o.TARGET_ID!==e.TARGET_ID),this.alertService.success()},o=>{this.alertService.error(o)}))}onCompanySelected(e){this.form.get("COMPANY_ID").setValue(e.COMPANY_ID),this.form.get("COMPANY_NAME").setValue(e.COMPANY_NAME)}onProductSelected(e){this.form.get("PRODUCT_ID").setValue(e.PRODUCT_ID),this.form.get("PRODUCT_NAME").setValue(e.PRODUCT_NAME)}formatRupiah(e,r){var a=e.replace(/[^,\d]/g,"").toString().split(","),p=a[0].length%3,d=a[0].substr(0,p),g=a[0].substr(p).match(/\d{3}/gi);return g&&(d+=(p?".":"")+g.join(".")),d=null!=a[1]?d+","+a[1]:d,null==r?d:d?"Rp. "+d:""}formatRupiah2(e,r){var a=e.toString().split(","),p=a[0].length%3,d=a[0].substr(0,p),g=a[0].substr(p).match(/\d{3}/gi);return g&&(d+=(p?".":"")+g.join(".")),d=null!=a[1]?d+","+a[1]:d,null==r?d:d?"Rp. "+d:""}confirmBox(e,r){"delete"==e&&N().fire({title:"Are you sure want to delete?",text:r.BP_GROUP_NAME,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(o=>{o.value&&this.delete(r)})}clickedit(e){this.isAddMode=!1,this.id=e,this.subs.add(this.targetService.getById(e).pipe((0,c.P)()).subscribe(r=>{this.form.patchValue(r),this.form.get("YEAR").setValue(this.datepipe.transform(r.YEAR,"yyyy"))}))}onSelectClick(e){this.subs.add(this.targetService.getByCompanyId(this.companyid,e).pipe((0,c.P)()).subscribe(r=>{this.targetlistbycompany=r,this.company_name=this.targetlistbycompany[0].COMPANY_NAME,this.targetlistbycompany.forEach(o=>{this.totaltarget=this.totaltarget+parseInt(o.TARGET)}),this.form.get("YEAR").setValue(this.datepipe.transform(r[0].YEAR,"yyyy"))}))}newtargetcompany(){this.isAddMode=!0,this.newtarget=!0,this.form.get("TARGET").setValue(0)}ngOnDestroy(){this.subs.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(s.qu),t.Y36(m.gz),t.Y36(m.F0),t.Y36(v),t.Y36(Y.c9),t.Y36(R.m),t.Y36(x.M),t.Y36(u.uU))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-target-add-edit"]],decls:67,vars:23,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],["class","mr-40",4,"ngIf"],["routerLink","/target",1,"main-btn","primary-btn","btn-hover","btn-sm"],[1,"lni","lni-chevron-left","mr-5"],[1,"row"],[1,"col-lg-6"],[1,"card-style","mb-30"],[1,"title","d-flex","flex-wrap","justify-content-between"],[1,"left"],["class","right",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"divider"],["class","select-style-1",4,"ngIf"],["class","input-style-1",4,"ngIf"],[1,"input-style-1"],["type","number","formControlName","TARGET",3,"ngClass"],[4,"ngIf"],[1,"select-style-1"],[1,"select-position"],["formControlName","YEAR",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["routerLink","/target",1,"main-btn","primary-btn-outline","rounded-btn","btn-hover","btn-sm"],[1,"main-btn","primary-btn","rounded-btn","btn-hover","btn-sm",3,"disabled"],[1,"mb-10"],[1,"right"],[1,"select-position","select-sm"],[1,"light-bg",3,"change"],[1,"table-wrapper","table-responsive"],[1,"table","striped-table"],[4,"ngFor","ngForOf"],[1,"mr-40"],[1,"main-btn","primary-btn","btn-hover","btn-sm",3,"click"],[1,"lni","lni-plus","mr-5"],["bindLabel","COMPANY_NAME","placeholder","Search Company","appendTo","body",3,"items","multiple","change"],["type","text","formControlName","COMPANY_NAME","disabled",""],["bindLabel","PRODUCT_NAME","placeholder","Search Product","appendTo","body",3,"items","multiple","change"],["type","text","formControlName","PRODUCT_NAME","disabled",""],["style","color:red",4,"ngIf"],[2,"color","red"],[3,"value"],[1,"min-width"],[1,"main-btn","primary-btn-outline","btn-hover","btn-sm",3,"click"],[1,"action"],[1,"text-danger",3,"click"],[1,"lni","lni-trash-can"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.YNc(1,M,2,0,"h4",1),t.YNc(2,q,2,0,"h4",1),t.TgZ(3,"button",2),t._UZ(4,"i",3),t._uU(5,"Back"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h5"),t._uU(12,"Target"),t.qZA()(),t.YNc(13,S,4,0,"div",9),t.qZA(),t.TgZ(14,"form",10),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(15,"span",11),t._UZ(16,"hr"),t.qZA(),t.YNc(17,O,4,2,"div",12),t.YNc(18,I,4,0,"div",13),t.YNc(19,P,4,2,"div",12),t.YNc(20,J,4,0,"div",13),t.TgZ(21,"div",14)(22,"label"),t._uU(23,"Target"),t.qZA(),t._UZ(24,"input",15),t.YNc(25,D,2,1,"div",16),t.qZA(),t.TgZ(26,"div",17)(27,"label"),t._uU(28,"Year"),t.qZA(),t.TgZ(29,"div",18)(30,"select",19),t.YNc(31,F,2,2,"option",20),t.qZA()(),t.YNc(32,G,2,1,"div",16),t.qZA(),t.TgZ(33,"span",11),t._UZ(34,"hr"),t.qZA(),t.TgZ(35,"div")(36,"button",21),t._uU(37," Cancel "),t.qZA(),t._uU(38,"\xa0 "),t.TgZ(39,"button",22),t.YNc(40,L,1,0,"span",16),t._uU(41," \xa0Save\xa0 "),t.qZA()()()()(),t.TgZ(42,"div",5)(43,"div",6)(44,"div",7)(45,"div",8)(46,"h6",23),t._uU(47),t.qZA(),t.TgZ(48,"h6",23),t._uU(49),t.qZA()(),t.TgZ(50,"div",24)(51,"div",17)(52,"div",25)(53,"select",26),t.NdJ("change",function(a){return r.onSelectClick(a.target.value)}),t.YNc(54,B,2,2,"option",20),t.qZA()()()()(),t.TgZ(55,"div",27)(56,"table",28)(57,"thead")(58,"tr")(59,"th")(60,"h6"),t._uU(61,"Product Name"),t.qZA()(),t.TgZ(62,"th")(63,"h6"),t._uU(64,"Target"),t.qZA()()()(),t.TgZ(65,"tbody"),t.YNc(66,$,13,2,"tr",29),t.qZA()()()()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",r.isAddMode),t.xp6(1),t.Q6J("ngIf",!r.isAddMode),t.xp6(11),t.Q6J("ngIf",!r.isAddMode),t.xp6(1),t.Q6J("formGroup",r.form),t.xp6(3),t.Q6J("ngIf",r.isAddMode&&0==r.newtarget),t.xp6(1),t.Q6J("ngIf",!r.isAddMode||r.newtarget),t.xp6(1),t.Q6J("ngIf",r.isAddMode),t.xp6(1),t.Q6J("ngIf",!r.isAddMode),t.xp6(4),t.Q6J("ngClass",t.VKq(19,y,r.submitted&&r.f.TARGET.errors)),t.xp6(1),t.Q6J("ngIf",r.submitted&&r.f.TARGET.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(21,y,r.submitted&&r.f.YEAR.errors)),t.xp6(1),t.Q6J("ngForOf",r.years),t.xp6(1),t.Q6J("ngIf",r.submitted&&r.f.YEAR.errors),t.xp6(7),t.Q6J("disabled",r.loading),t.xp6(1),t.Q6J("ngIf",r.loading),t.xp6(7),t.hij(" Company : ",r.company_name,""),t.xp6(2),t.hij(" Total : ",r.formatRupiah2(r.totaltarget,"Rp. "),""),t.xp6(5),t.Q6J("ngForOf",r.years),t.xp6(12),t.Q6J("ngForOf",r.targetlistbycompany))},directives:[u.O5,m.rH,s._Y,s.JL,s.sg,b.w9,s.Fj,s.JJ,s.u,s.wV,u.mk,s.EJ,u.sg,s.YN,s.Kr],styles:[""]}),i})();var T=l(8567),C=l(3189);function k(i,n){if(1&i&&(t.TgZ(0,"option",27),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.s9C("value",e.YEAR),t.xp6(1),t.Oqu(e.YEAR)}}function j(i,n){if(1&i&&(t.TgZ(0,"tr")(1,"td",28)(2,"p"),t._uU(3),t.qZA()(),t.TgZ(4,"td",28)(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"td",28)(8,"p"),t._uU(9),t.qZA()(),t.TgZ(10,"td")(11,"div",29)(12,"button",30),t._UZ(13,"i",31),t.qZA(),t._uU(14,"\xa0 "),t.qZA()()()),2&i){const e=n.$implicit,r=t.oxw();t.xp6(3),t.Oqu(e.COMPANY_NAME),t.xp6(3),t.Oqu(e.PRODUCT_NAME),t.xp6(3),t.Oqu(r.formatRupiah(e.TARGET,"Rp. ")),t.xp6(3),t.MGl("routerLink","edit/",e.COMPANY_ID,"")}}const V=function(i,n){return{itemsPerPage:i,currentPage:n}},H=[{path:"target",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-target-layout"]],decls:1,vars:0,template:function(e,r){1&e&&t._UZ(0,"router-outlet")},directives:[m.lC],styles:[""]}),i})(),children:[{path:"",component:(()=>{class i{constructor(e,r){this.targetServcie=e,this.datepipe=r,this.subs=new _.Y,this.isManaging=!1,this.gridLayout=!0,this.activities=null,this.targetlist=null,this.p=1,this.count=10,this.countdata=null,this.currDate=new Date,this.years=[{YEAR:"2022"},{YEAR:"2023"},{YEAR:"2024"},{YEAR:"2025"}]}ngOnInit(){this.subs.add(this.targetServcie.getAll(this.datepipe.transform(this.currDate,"yyyy").toString()).pipe((0,c.P)()).subscribe(e=>{this.targetlist=e,this.countdata=this.targetlist.length}))}formatRupiah(e,r){var a=e.replace(/[^,\d]/g,"").toString().split(","),p=a[0].length%3,d=a[0].substr(0,p),g=a[0].substr(p).match(/\d{3}/gi);return g&&(d+=(p?".":"")+g.join(".")),d=null!=a[1]?d+","+a[1]:d,null==r?d:d?"Rp. "+d:""}onSelectClick(e){this.subs.add(this.targetServcie.getAll(e).pipe((0,c.P)()).subscribe(r=>{this.targetlist=r,this.countdata=this.targetlist.length}))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v),t.Y36(u.uU))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-target"]],decls:48,vars:12,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[1,"mr-40"],["routerLink","add",1,"main-btn","primary-btn","btn-hover","btn-sm"],[1,"lni","lni-plus","mr-5"],[1,"tables-wrapper"],[1,"row"],[1,"col-lg-12"],[1,"card-style","mb-30"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","py-3"],[1,"left"],[1,"select-style-1"],[1,"select-position","select-sm"],[1,"light-bg",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"right"],[1,"table-search","d-flex"],["action","#"],["type","text","name","something","placeholder","Search...",3,"ngModel","ngModelChange"],[1,"lni","lni-search-alt"],[1,"table-wrapper","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"pt-10","d-flex","flex-wrap","justify-content-between"],[1,"text-right"],[3,"pageChange"],[3,"value"],[1,"min-width"],[1,"action"],[1,"text-primary",2,"cursor","pointer",3,"routerLink"],[1,"lni","lni-pencil-alt"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Target"),t.qZA(),t.TgZ(3,"button",2),t._UZ(4,"i",3),t._uU(5,"New Target"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),t._UZ(11,"div",9),t.qZA(),t.TgZ(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"select",14),t.NdJ("change",function(a){return r.onSelectClick(a.target.value)}),t.YNc(17,k,2,2,"option",15),t.qZA()()()(),t.TgZ(18,"div",16)(19,"div",17)(20,"form",18)(21,"input",19),t.NdJ("ngModelChange",function(a){return r.filterdata=a}),t.qZA(),t.TgZ(22,"button"),t._UZ(23,"i",20),t.qZA()()()()(),t.TgZ(24,"div",21)(25,"table",22)(26,"thead")(27,"tr")(28,"th")(29,"h6"),t._uU(30,"Company Name"),t.qZA()(),t.TgZ(31,"th")(32,"h6"),t._uU(33,"Product"),t.qZA()(),t.TgZ(34,"th")(35,"h6"),t._uU(36,"Target"),t.qZA()(),t.TgZ(37,"th")(38,"h6"),t._uU(39,"Action"),t.qZA()()()(),t.TgZ(40,"tbody"),t.YNc(41,j,15,4,"tr",23),t.ALo(42,"paginate"),t.ALo(43,"filter"),t.qZA()()(),t.TgZ(44,"div",24),t._UZ(45,"div",11),t.TgZ(46,"div",25)(47,"pagination-controls",26),t.NdJ("pageChange",function(a){return r.p=a}),t.qZA()()()()()()()),2&e&&(t.xp6(17),t.Q6J("ngForOf",r.years),t.xp6(4),t.Q6J("ngModel",r.filterdata),t.xp6(20),t.Q6J("ngForOf",t.xi3(42,3,t.xi3(43,6,r.targetlist,r.filterdata),t.WLB(9,V,r.count,r.p))))},directives:[m.rH,u.sg,s.YN,s.Kr,s._Y,s.JL,s.F,s.Fj,s.JJ,s.On,T.LS],pipes:[T._s,C.Z],styles:[""]}),i})()},{path:"add",component:Z},{path:"edit/:companyid",component:Z}]}];let z=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.Bz.forChild(H)],m.Bz]}),i})(),X=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[u.uU],imports:[[s.u5,u.ez,z,s.UX,T.JX,C.h,b.A0]]}),i})()}}]);