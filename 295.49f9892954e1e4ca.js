"use strict";(self.webpackChunkappdemo_ng12=self.webpackChunkappdemo_ng12||[]).push([[295],{9295:(Ce,m,d)=>{d.r(m),d.d(m,{NewsEventModule:()=>he});var c=d(9808),o=d(4182),p=d(8266),_=d(7224),v=d(8745),e=d(9863),T=d(8359),h=d(1914),E=d(328),I=d(9400),g=d(2340),w=d(520);let b=(()=>{class t{constructor(i){this.http=i}getnotifByID(i){return this.http.get(`${g.N.apiUrl}/push-notif/getnotifbyid/${i}`)}getnotiftype(){return this.http.get(`${g.N.apiUrl}/push-notif/getnotiftype`)}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(w.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=d(636);function D(t,s){1&t&&(e.TgZ(0,"h4",37),e._uU(1,"New Event"),e.qZA())}function S(t,s){1&t&&(e.TgZ(0,"h4",37),e._uU(1,"Edit Event"),e.qZA())}function q(t,s){1&t&&(e.TgZ(0,"div",39),e._uU(1,"*News required"),e.qZA())}function x(t,s){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,q,2,0,"div",38),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.NEWS.errors.required)}}function y(t,s){1&t&&(e.TgZ(0,"div",39),e._uU(1,"*Start Date required"),e.qZA())}function U(t,s){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,y,2,0,"div",38),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.START_DATE.errors.required)}}function O(t,s){1&t&&(e.TgZ(0,"div",39),e._uU(1,"*End Date required"),e.qZA())}function Y(t,s){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,O,2,0,"div",38),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.END_DATE.errors.required)}}function F(t,s){1&t&&(e.TgZ(0,"div",39),e._uU(1,"*Description required"),e.qZA())}function J(t,s){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,F,2,0,"div",38),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.DESCRIPTION.errors.required)}}function R(t,s){1&t&&(e.TgZ(0,"div",39),e._uU(1,"*URL required"),e.qZA())}function M(t,s){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,R,2,0,"div",38),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.URL.errors.required)}}function P(t,s){1&t&&(e.TgZ(0,"div",45),e._UZ(1,"div",46),e.qZA())}function Q(t,s){1&t&&(e.TgZ(0,"div",47),e._uU(1," Image Uploaded Succesfuly!"),e.qZA())}function k(t,s){1&t&&(e.TgZ(0,"div",48),e._uU(1," Image Upload Failed!"),e.qZA())}const L=function(t){return{"background-image":t}};function W(t,s){if(1&t&&(e.TgZ(0,"div",40),e._UZ(1,"div",41),e.YNc(2,P,2,0,"div",42),e.YNc(3,Q,2,0,"div",43),e.YNc(4,k,2,0,"div",44),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Gre("img-preview","fail"===i.selectedFile.status?"-error":"",""),e.Q6J("ngStyle",e.VKq(7,L,"url("+i.selectedFile.src+")")),e.xp6(1),e.Q6J("ngIf",i.selectedFile.pending),e.xp6(1),e.Q6J("ngIf","ok"===i.selectedFile.status),e.xp6(1),e.Q6J("ngIf","fail"===i.selectedFile.status)}}function V(t,s){1&t&&(e.TgZ(0,"div",39),e._uU(1,"*Picture required"),e.qZA())}function B(t,s){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,V,2,0,"div",38),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.PICTURE.errors.required)}}function G(t,s){if(1&t&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&t){const i=s.$implicit;e.s9C("value",i.CATEGORY_NEWS_ID),e.xp6(1),e.Oqu(i.CATEGORY_NEWS_NAME)}}function K(t,s){1&t&&(e.TgZ(0,"div",39),e._uU(1,"*Category required"),e.qZA())}function j(t,s){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,K,2,0,"div",38),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.CATEGORY_NEWS_ID.errors.required)}}function z(t,s){1&t&&(e.TgZ(0,"div",39),e._uU(1,"*Start Date Notif required"),e.qZA())}function X(t,s){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,z,2,0,"div",38),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.f.START_DATE_NOTIF.errors.required)}}const u=function(t){return{"is-invalid":t}};function $(t,s){if(1&t&&(e.TgZ(0,"div",9)(1,"label"),e._uU(2,"Start Date Notif"),e.qZA(),e._UZ(3,"input",50),e.YNc(4,X,2,1,"div",11),e.qZA()),2&t){const i=e.oxw();e.xp6(3),e.Q6J("ngClass",e.VKq(2,u,i.submitted&&i.f.START_DATE_NOTIF.errors)),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.f.START_DATE_NOTIF.errors)}}function H(t,s){1&t&&(e.TgZ(0,"div",39),e._uU(1,"*End Date Notif required"),e.qZA())}function ee(t,s){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,H,2,0,"div",38),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.f.END_DATE_NOTIF.errors.required)}}function te(t,s){if(1&t&&(e.TgZ(0,"div",9)(1,"label"),e._uU(2,"End Date Notif"),e.qZA(),e._UZ(3,"input",51),e.YNc(4,ee,2,1,"div",11),e.qZA()),2&t){const i=e.oxw();e.xp6(3),e.Q6J("ngClass",e.VKq(2,u,i.submitted&&i.f.END_DATE_NOTIF.errors)),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.f.END_DATE_NOTIF.errors)}}function ie(t,s){if(1&t&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&t){const i=s.$implicit;e.s9C("value",i.NOTIF_TYPE_ID),e.xp6(1),e.Oqu(i.NOTIF_TYPE_NAME)}}function ne(t,s){1&t&&(e.TgZ(0,"div",39),e._uU(1,"*notif type required"),e.qZA())}function se(t,s){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,ne,2,0,"div",38),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.f.NOTIF_TYPE_ID.errors.required)}}function oe(t,s){if(1&t&&(e.TgZ(0,"div",23)(1,"label"),e._uU(2,"Notif Type"),e.qZA(),e.TgZ(3,"div",24)(4,"select",52),e.YNc(5,ie,2,2,"option",26),e.qZA()(),e.YNc(6,se,2,1,"div",11),e.qZA()),2&t){const i=e.oxw();e.xp6(4),e.Q6J("ngClass",e.VKq(3,u,i.submitted&&i.f.NOTIF_TYPE_ID.errors)),e.xp6(1),e.Q6J("ngForOf",i.notiftype),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.f.NOTIF_TYPE_ID.errors)}}function re(t,s){1&t&&e._UZ(0,"span")}const de=function(){return{standalone:!0}};class ae{constructor(s,i){this.src=s,this.file=i,this.pending=!1,this.status="init"}}let N=(()=>{class t{constructor(i,n,r,a,l,Ee,Ae,Ne,Ze){this.formBuilder=i,this.route=n,this.router=r,this.newsEventService=a,this.alertService=l,this.datepipe=Ee,this.imageService=Ae,this.industryService=Ne,this.notifService=Ze,this.subs=new v.Y,this.loading=!1,this.submitted=!1,this.data=null,this.category=null,this.categoryName=null,this.isChecked=null,this.selectedIndustry=null,this.industrylist=null,this.notiftype=null,this.notifdata=null}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({NEWS_ID:[0],NEWS:["",o.kI.required],START_DATE:["",o.kI.required],END_DATE:["",o.kI.required],START_DATE_NOTIF:[""],END_DATE_NOTIF:[""],NOTIF_TYPE_ID:[""],DESCRIPTION:["",o.kI.required],URL:["",o.kI.required],PICTURE:["",o.kI.required],ISACTIVE:[!0],CATEGORY_NEWS_ID:["",o.kI.required],CATEGORY_NEWS_NAME:[""],notif:[""],group_news_list:[""]}),this.isAddMode||(this.subs.add(this.newsEventService.getById(this.id).pipe((0,_.P)()).subscribe(i=>{this.form.patchValue(i),this.form.get("START_DATE").setValue(this.datepipe.transform(i.START_DATE,"yyyy-MM-ddThh:mm")),this.form.get("END_DATE").setValue(this.datepipe.transform(i.END_DATE,"yyyy-MM-ddThh:mm"))})),this.subs.add(this.newsEventService.getGroupNews(this.id).subscribe(i=>this.selectedIndustry=i)),this.subs.add(this.notifService.getnotifByID(this.id).subscribe(i=>{this.notifdata=i,this.notifdata.length>0&&(this.isChecked=!0,this.form.get("START_DATE_NOTIF").setValue(this.datepipe.transform(this.notifdata[0].START_DATE_NOTIF,"yyyy-MM-ddThh:mm")),this.form.get("END_DATE_NOTIF").setValue(this.datepipe.transform(this.notifdata[0].END_DATE_NOTIF,"yyyy-MM-ddThh:mm")),this.form.get("NOTIF_TYPE_ID").setValue(this.notifdata[0].NOTIF_TYPE_ID))}))),this.subs.add(this.newsEventService.getcategory().subscribe(i=>this.category=i)),this.subs.add(this.industryService.getlistindustry().subscribe(i=>this.industrylist=i)),this.subs.add(this.notifService.getnotiftype().subscribe(i=>this.notiftype=i))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.createNewsEvent())}onSuccess(){this.selectedFile.pending=!1,this.selectedFile.status="ok"}onError(){this.selectedFile.pending=!1,this.selectedFile.status="fail",this.selectedFile.src=""}processFile(i){const n=i.files[0],r=new FileReader;this.form.value.PICTURE&&this.imageService.deleteImage(this.form.value.PICTURE).pipe((0,_.P)()).subscribe(),r.addEventListener("load",a=>{this.selectedFile=new ae(a.target.result,n),this.imageService.uploadImage(this.selectedFile.file).subscribe(l=>{this.form.get("PICTURE").setValue(l.filename),this.onSuccess()},l=>{this.onError()})}),r.readAsDataURL(n)}onSelectClick(i){this.categoryName=this.category.filter(n=>n.CATEGORY_NEWS_ID==i)[0].CATEGORY_NEWS_NAME,this.form.get("CATEGORY_NEWS_NAME").setValue(this.categoryName)}createNewsEvent(){this.isAddMode||this.isChecked&&this.form.get("notif").setValue({NOTIF_ID:this.notifdata[0].NOTIF_ID,START_DATE_NOTIF:this.form.value.START_DATE_NOTIF,END_DATE_NOTIF:this.form.value.END_DATE_NOTIF,NOTIF_TYPE_ID:this.form.value.NOTIF_TYPE_ID,DATA_ID:this.notifdata[0].DATA_ID,DISCORD_ID:this.notifdata[0].DISCORD_ID}),this.isAddMode&&this.isChecked&&this.form.get("notif").setValue({START_DATE_NOTIF:this.form.value.START_DATE_NOTIF,END_DATE_NOTIF:this.form.value.END_DATE_NOTIF,NOTIF_TYPE_ID:this.form.value.NOTIF_TYPE_ID}),this.alertService.loading(),this.subs.add(this.newsEventService.create(this.form.value).pipe((0,_.P)()).subscribe({next:()=>{this.alertService.success(),this.router.navigate(["../"],{relativeTo:this.route})},error:i=>{this.alertService.error(i),this.loading=!1}}))}changed(i){this.isChecked=i.target.checked}onSelection(i){this.form.get("group_news_list").setValue(i)}ngOnDestroy(){this.subs.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(o.qu),e.Y36(p.gz),e.Y36(p.F0),e.Y36(T.f),e.Y36(h.c9),e.Y36(c.uU),e.Y36(E.C),e.Y36(I.L),e.Y36(b))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:84,vars:44,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],["class","mr-40",4,"ngIf"],["routerLink","/news-event",1,"main-btn","primary-btn","rounded-btn","btn-hover","btn-sm"],[1,"lni","lni-chevron-left","mr-5"],[1,"row"],[3,"formGroup","ngSubmit"],[1,"col-lg-6"],[1,"card-style","mb-30"],[1,"divider"],[1,"input-style-1"],["type","text","formControlName","NEWS",3,"ngClass"],[4,"ngIf"],["type","datetime-local","formControlName","START_DATE",3,"ngClass"],["type","datetime-local","formControlName","END_DATE",3,"ngClass"],[1,"input-style-3"],["placeholder","description","formControlName","DESCRIPTION",3,"ngClass"],[1,"icon"],[1,"lni","lni-text-format"],["type","text","formControlName","URL",3,"ngClass"],["type","file","accept","image/*",3,"change"],["imageInput",""],["class","img-preview-container",4,"ngIf"],["type","text","formControlName","PICTURE","disabled","",3,"ngClass"],[1,"select-style-1"],[1,"select-position"],["formControlName","CATEGORY_NEWS_ID",3,"ngClass","change"],[3,"value",4,"ngFor","ngForOf"],["bindLabel","INDUSTRY_NAME","placeholder","Select Industry","appendTo","body",3,"items","multiple","ngModel","ngModelOptions","change","ngModelChange"],[1,"form-check","form-switch","toggle-switch","mb-30"],["formControlName","ISACTIVE","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["for","toggleSwitch1",1,"form-check-label"],["type","checkbox","id","toggleSwitch2",1,"form-check-input",3,"checked","change"],["for","toggleSwitch2",1,"form-check-label"],["class","input-style-1",4,"ngIf"],["class","select-style-1",4,"ngIf"],["routerLink","/news-event",1,"main-btn","primary-btn-outline","rounded-btn","btn-hover","btn-sm"],[1,"main-btn","primary-btn","rounded-btn","btn-hover","btn-sm",3,"disabled"],[1,"mr-40"],["style","color:red",4,"ngIf"],[2,"color","red"],[1,"img-preview-container"],[3,"ngStyle"],["class","img-loading-overlay",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"img-loading-overlay"],[1,"img-spinning-circle"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[3,"value"],["type","datetime-local","formControlName","START_DATE_NOTIF",3,"ngClass"],["type","datetime-local","formControlName","END_DATE_NOTIF",3,"ngClass"],["formControlName","NOTIF_TYPE_ID",3,"ngClass"]],template:function(i,n){if(1&i){const r=e.EpF();e.TgZ(0,"div",0),e.YNc(1,D,2,0,"h4",1),e.YNc(2,S,2,0,"h4",1),e.TgZ(3,"button",2),e._UZ(4,"i",3),e._uU(5,"Back"),e.qZA()(),e.TgZ(6,"div",4)(7,"form",5),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(8,"div",6)(9,"div",7)(10,"h5"),e._uU(11,"News Description"),e.qZA(),e.TgZ(12,"span",8),e._UZ(13,"hr"),e.qZA(),e.TgZ(14,"div",9)(15,"label"),e._uU(16,"News"),e.qZA(),e._UZ(17,"input",10),e.YNc(18,x,2,1,"div",11),e.qZA(),e.TgZ(19,"div",9)(20,"label"),e._uU(21,"Start Date"),e.qZA(),e._UZ(22,"input",12),e.YNc(23,U,2,1,"div",11),e.qZA(),e.TgZ(24,"div",9)(25,"label"),e._uU(26,"End Date"),e.qZA(),e._UZ(27,"input",13),e.YNc(28,Y,2,1,"div",11),e.qZA(),e.TgZ(29,"div",14)(30,"textarea",15),e._uU(31," "),e.qZA(),e.TgZ(32,"span",16),e._UZ(33,"i",17),e.qZA(),e.YNc(34,J,2,1,"div",11),e.qZA(),e.TgZ(35,"div",9)(36,"label"),e._uU(37,"URL"),e.qZA(),e._UZ(38,"input",18),e.YNc(39,M,2,1,"div",11),e.qZA(),e.TgZ(40,"div",9)(41,"label"),e._uU(42,"Select Image"),e.qZA(),e.TgZ(43,"input",19,20),e.NdJ("change",function(){e.CHM(r);const l=e.MAs(44);return n.processFile(l)}),e.qZA()(),e.YNc(45,W,5,9,"div",21),e.TgZ(46,"div",9)(47,"label"),e._uU(48,"PICTURE"),e.qZA(),e._UZ(49,"input",22),e.YNc(50,B,2,1,"div",11),e.qZA(),e.TgZ(51,"div",23)(52,"label"),e._uU(53,"Category"),e.qZA(),e.TgZ(54,"div",24)(55,"select",25),e.NdJ("change",function(l){return n.onSelectClick(l.target.value)}),e.YNc(56,G,2,2,"option",26),e.qZA()(),e.YNc(57,j,2,1,"div",11),e.qZA(),e.TgZ(58,"div")(59,"label"),e._uU(60,"Group News By Industry"),e.qZA(),e.TgZ(61,"div",24)(62,"ng-select",27),e.NdJ("change",function(l){return n.onSelection(l)})("ngModelChange",function(l){return n.selectedIndustry=l}),e.qZA()()(),e._UZ(63,"br"),e.TgZ(64,"div",28),e._UZ(65,"input",29),e.TgZ(66,"label",30),e._uU(67,"IsActive"),e.qZA()(),e.TgZ(68,"div",28)(69,"input",31),e.NdJ("change",function(l){return n.changed(l)}),e.qZA(),e.TgZ(70,"label",32),e._uU(71,"Set Notif"),e.qZA()(),e.YNc(72,$,5,4,"div",33),e.YNc(73,te,5,4,"div",33),e.YNc(74,oe,7,5,"div",34),e.TgZ(75,"span",8),e._UZ(76,"hr"),e.qZA(),e.TgZ(77,"div")(78,"button",35),e._uU(79," Cancel "),e.qZA(),e._uU(80,"\xa0 "),e.TgZ(81,"button",36),e.YNc(82,re,1,0,"span",11),e._uU(83," \xa0Save\xa0 "),e.qZA()()()()()()}2&i&&(e.xp6(1),e.Q6J("ngIf",n.isAddMode),e.xp6(1),e.Q6J("ngIf",!n.isAddMode),e.xp6(5),e.Q6J("formGroup",n.form),e.xp6(10),e.Q6J("ngClass",e.VKq(29,u,n.submitted&&n.f.NEWS.errors)),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.f.NEWS.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(31,u,n.submitted&&n.f.START_DATE.errors)),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.f.START_DATE.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(33,u,n.submitted&&n.f.END_DATE.errors)),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.f.END_DATE.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(35,u,n.submitted&&n.f.DESCRIPTION.errors)),e.xp6(4),e.Q6J("ngIf",n.submitted&&n.f.DESCRIPTION.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(37,u,n.submitted&&n.f.URL.errors)),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.f.URL.errors),e.xp6(6),e.Q6J("ngIf",n.selectedFile),e.xp6(4),e.Q6J("ngClass",e.VKq(39,u,n.submitted&&n.f.PICTURE.errors)),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.f.PICTURE.errors),e.xp6(5),e.Q6J("ngClass",e.VKq(41,u,n.submitted&&n.f.CATEGORY_NEWS_ID.errors)),e.xp6(1),e.Q6J("ngForOf",n.category),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.f.CATEGORY_NEWS_ID.errors),e.xp6(5),e.Q6J("items",n.industrylist)("multiple",!0)("ngModel",n.selectedIndustry)("ngModelOptions",e.DdM(43,de)),e.xp6(7),e.Q6J("checked",n.isChecked),e.xp6(3),e.Q6J("ngIf",n.isChecked),e.xp6(1),e.Q6J("ngIf",n.isChecked),e.xp6(1),e.Q6J("ngIf",n.isChecked),e.xp6(7),e.Q6J("disabled",n.loading),e.xp6(1),e.Q6J("ngIf",n.loading))},directives:[c.O5,p.rH,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,c.mk,c.PC,o.EJ,c.sg,o.YN,o.Kr,A.w9,o.On,o.Wl],styles:['.image-upload-container[_ngcontent-%COMP%]{cursor:pointer}.img-preview-container[_ngcontent-%COMP%]{background-color:#f7f7f7;position:relative}.img-preview-container[_ngcontent-%COMP%]   .img-preview[_ngcontent-%COMP%]{background:center center no-repeat;background-size:contain;height:116px;width:116px}.img-preview-container[_ngcontent-%COMP%]   .img-preview-error[_ngcontent-%COMP%]{display:none}.img-loading-overlay[_ngcontent-%COMP%]{background-color:#000;bottom:0;left:0;opacity:.2;position:absolute;right:0;top:0}.img-spinning-circle[_ngcontent-%COMP%]{display:inline-block;width:64px;height:64px;margin:auto;position:absolute;top:0;left:0;bottom:0;right:0}.img-spinning-circle[_ngcontent-%COMP%]:after{content:" ";display:block;width:46px;height:46px;margin:1px;border-radius:50%;border:5px solid #fff;border-color:#fff transparent #fff transparent;animation:lds-dual-ring 1.2s linear infinite}@keyframes lds-dual-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),t})(),le=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(i,n){1&i&&e._UZ(0,"router-outlet")},directives:[p.lC],encapsulation:2}),t})();var ce=d(2454),ue=d.n(ce),Z=d(5492),f=d(8567),C=d(3189);function pe(t,s){1&t&&(e.TgZ(0,"div")(1,"span",36),e._uU(2,"Active"),e.qZA()())}function _e(t,s){1&t&&(e.TgZ(0,"span",37),e._uU(1,"Off"),e.qZA())}function ge(t,s){1&t&&(e.TgZ(0,"span"),e._UZ(1,"i",38),e.qZA())}function fe(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"div",24),e._UZ(3,"img",25),e.qZA()(),e.TgZ(4,"td",26)(5,"p"),e._uU(6),e.qZA()(),e.TgZ(7,"td",26)(8,"p"),e._uU(9),e.ALo(10,"date"),e.qZA()(),e.TgZ(11,"td",26)(12,"p"),e._uU(13),e.ALo(14,"date"),e.qZA()(),e.TgZ(15,"td",26)(16,"p"),e._uU(17),e.qZA()(),e.TgZ(18,"td",26),e.YNc(19,pe,3,0,"div",27),e.YNc(20,_e,2,0,"ng-template",null,28,e.W1O),e.qZA(),e.TgZ(22,"td")(23,"div",29)(24,"button",30),e.NdJ("click",function(){return e.CHM(i),e.oxw().subscribeToNotification()}),e._UZ(25,"i",31),e.qZA(),e._uU(26,"\xa0 "),e.TgZ(27,"button",32),e._UZ(28,"i",33),e.qZA(),e._uU(29,"\xa0 "),e.TgZ(30,"button",34),e.NdJ("click",function(){const a=e.CHM(i).$implicit;return e.oxw().confirmBox("delete",a)}),e.YNc(31,ge,2,0,"span",35),e.qZA()()()()}if(2&t){const i=s.$implicit,n=e.MAs(21),r=e.oxw();e.xp6(3),e.s9C("src",r.apiurl+i.PICTURE,e.LSH),e.xp6(3),e.Oqu(i.NEWS),e.xp6(3),e.Oqu(e.xi3(10,10,i.START_DATE,"fullDate")),e.xp6(4),e.Oqu(e.xi3(14,13,i.END_DATE,"fullDate")),e.xp6(4),e.Oqu(i.CATEGORY_NEWS_NAME),e.xp6(2),e.Q6J("ngIf",i.ISACTIVE)("ngIfElse",n),e.xp6(8),e.MGl("routerLink","edit/",i.NEWS_ID,""),e.xp6(3),e.Q6J("disabled",i.isDeleting),e.xp6(1),e.Q6J("ngIf",!i.isDeleting)}}const me=function(t,s){return{itemsPerPage:t,currentPage:s}},ve=[{path:"news-event",component:le,children:[{path:"",component:(()=>{class t{constructor(i,n,r,a){this.newseventService=i,this.imageService=n,this.swPush=r,this.alertService=a,this.subs=new v.Y,this.news=null,this.VAPID_PUBLIC_KEY="BPSXG3mAlQc4zZ9aluFL8rCwgzJRcdWvLkBQYEPV7nukhcKAO8iUXhxLaeecUojilqloMXmvKwW8WmBK3Od87Zw",this.baseUrl="http://localhost:4200/news",this.p=1,this.count=10,this.countdata=null,this.apiurl=g.N.apiUrl+"/image/"}ngOnInit(){this.subs.add(this.newseventService.getAll().pipe((0,_.P)()).subscribe(i=>{this.news=i,this.countdata=this.news.length}))}deleteNews(i){this.alertService.loading();const n=this.news.find(r=>r.NEWS_ID===i.NEWS_ID);this.subs.add(this.newseventService.delete(i.NEWS_ID).pipe((0,_.P)()).subscribe(()=>{n.isDeleting=!0,this.news=this.news.filter(r=>r.NEWS_ID!==i.NEWS_ID),this.subs.add(this.imageService.deleteImage(n.PICTURE).pipe((0,_.P)()).subscribe()),this.countdata=this.news.length,this.alertService.success()},r=>{this.alertService.error(r)}))}subscribeToNotification(){this.swPush.isEnabled&&(console.log("masukk"),this.swPush.requestSubscription({serverPublicKey:this.VAPID_PUBLIC_KEY}).then(i=>console.log(i)).catch(i=>console.error("Could not subscribe to notifications",i)))}confirmBox(i,n){"delete"==i&&ue().fire({title:"Are you sure want to delete?",text:n.NEWS,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(r=>{r.value&&this.deleteNews(n)})}ngOnDestroy(){this.subs.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(T.f),e.Y36(E.C),e.Y36(Z.Mk),e.Y36(h.c9))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:60,vars:12,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[1,"mr-40"],["routerLink","add",1,"main-btn","primary-btn","btn-hover","btn-sm"],[1,"lni","lni-plus","mr-5"],[1,"tables-wrapper"],[1,"row"],[1,"col-lg-12"],[1,"card-style","mb-30"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","py-3"],[1,"left"],[1,"right"],[1,"table-search","d-flex"],["action","#"],["type","text","name","something","placeholder","Search...",3,"ngModel","ngModelChange"],[1,"lni","lni-search-alt"],[1,"table-wrapper","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"pt-10","d-flex","flex-wrap","justify-content-between"],[1,"text-sm","text-gray"],[1,"text-right"],[3,"pageChange"],[1,"employee-image"],["alt","",3,"src"],[1,"min-width"],[4,"ngIf","ngIfElse"],["off",""],[1,"action"],[1,"text-primary",2,"cursor","pointer",3,"click"],[1,"lni","lni-alarm"],[1,"text-primary",2,"cursor","pointer",3,"routerLink"],[1,"lni","lni-pencil-alt"],[1,"text-danger",3,"disabled","click"],[4,"ngIf"],[1,"status-btn","active-btn"],[1,"status-btn","close-btn"],[1,"lni","lni-trash-can"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"News & Event"),e.qZA(),e.TgZ(3,"button",2),e._UZ(4,"i",3),e._uU(5," Add "),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),e._UZ(11,"div",9),e.qZA(),e.TgZ(12,"div",10)(13,"div",11)(14,"p"),e._uU(15,"Show "),e.TgZ(16,"span"),e._uU(17,"10"),e.qZA(),e._uU(18," entries"),e.qZA()(),e.TgZ(19,"div",12)(20,"div",13)(21,"form",14)(22,"input",15),e.NdJ("ngModelChange",function(a){return n.filterdata=a}),e.qZA(),e.TgZ(23,"button"),e._UZ(24,"i",16),e.qZA()()()()(),e.TgZ(25,"div",17)(26,"table",18)(27,"thead")(28,"tr")(29,"th")(30,"h6"),e._uU(31,"#"),e.qZA()(),e.TgZ(32,"th")(33,"h6"),e._uU(34,"News"),e.qZA()(),e.TgZ(35,"th")(36,"h6"),e._uU(37,"Start Date"),e.qZA()(),e.TgZ(38,"th")(39,"h6"),e._uU(40,"End Date"),e.qZA()(),e.TgZ(41,"th")(42,"h6"),e._uU(43,"Category"),e.qZA()(),e.TgZ(44,"th")(45,"h6"),e._uU(46,"Status"),e.qZA()(),e.TgZ(47,"th")(48,"h6"),e._uU(49,"Action"),e.qZA()()()(),e.TgZ(50,"tbody"),e.YNc(51,fe,32,16,"tr",19),e.ALo(52,"paginate"),e.ALo(53,"filter"),e.qZA()()(),e.TgZ(54,"div",20)(55,"div",11)(56,"p",21),e._uU(57),e.qZA()(),e.TgZ(58,"div",22)(59,"pagination-controls",23),e.NdJ("pageChange",function(a){return n.p=a}),e.qZA()()()()()()()),2&i&&(e.xp6(22),e.Q6J("ngModel",n.filterdata),e.xp6(29),e.Q6J("ngForOf",e.xi3(52,3,e.xi3(53,6,n.news,n.filterdata),e.WLB(9,me,n.count,n.p))),e.xp6(6),e.hij("Total ",n.countdata," Data"))},directives:[p.rH,o._Y,o.JL,o.F,o.Fj,o.JJ,o.On,c.sg,c.O5,f.LS],pipes:[f._s,C.Z,c.uU],encapsulation:2}),t})()},{path:"add",component:N},{path:"edit/:id",component:N}]}];let Te=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.Bz.forChild(ve)],p.Bz]}),t})(),he=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[c.uU],imports:[[c.ez,o.UX,Te,A.A0,o.u5,Z.Wr.register("ngsw-worker.js",{enabled:!0}),f.JX,C.h]]}),t})()}}]);