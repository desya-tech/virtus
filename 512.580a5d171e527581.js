"use strict";(self.webpackChunkappdemo_ng12=self.webpackChunkappdemo_ng12||[]).push([[512],{6512:(J,m,l)=>{l.r(m),l.d(m,{RuleManagementModule:()=>w});var d=l(9808),s=l(8266),o=l(4182),g=l(7224),p=l(8745),e=l(9863),h=l(1382),A=l(6672);function b(t,r){1&t&&(e.TgZ(0,"div")(1,"h4",23),e._uU(2,"New Rule"),e.qZA()())}function _(t,r){1&t&&(e.TgZ(0,"h4",23),e._uU(1,"Edit Rule"),e.qZA())}function T(t,r){1&t&&(e.TgZ(0,"div",25),e._uU(1,"*rule name required"),e.qZA())}function R(t,r){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,T,2,0,"div",24),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.RULE_NAME.errors.required)}}function M(t,r){1&t&&e._UZ(0,"span")}const U=function(t){return{"is-invalid":t}};let f=(()=>{class t{constructor(n,i,a,u,v){this.formBuilder=n,this.route=i,this.router=a,this.ruleService=u,this.alertService=v,this.subs=new p.Y,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({RULE_NAME:["",o.kI.required],USER_MGMT:[""],ACTIVITY_MGMT:[""],LEADERBOARDS_PAGE:[""],CONTENT_MGMT:[""],PIPELINES_PAGE:[""],REVENUE_LEADERBOARD:[""]}),this.isAddMode||this.subs.add(this.ruleService.getByID(this.id).subscribe(n=>this.form.patchValue(n)))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?this.createRole():this.updateRule())}createRole(){this.alertService.loading(),this.subs.add(this.ruleService.register(this.form.value).pipe((0,g.P)()).subscribe({next:()=>{this.alertService.success(),this.router.navigate(["../"],{relativeTo:this.route})},error:n=>{this.alertService.error(n),this.loading=!1}}))}updateRule(){this.alertService.loading(),this.subs.add(this.ruleService.update(this.id,this.form.value).pipe((0,g.P)()).subscribe({next:()=>{this.alertService.success(),this.router.navigate(["../../"],{relativeTo:this.route})},error:n=>{this.alertService.error(n),this.loading=!1}}))}getRandomInt(n){return Math.floor(Math.random()*n)}ngOnDestroy(){this.subs.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(o.qu),e.Y36(s.gz),e.Y36(s.F0),e.Y36(h.P),e.Y36(A.c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:59,vars:9,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[4,"ngIf","ngIfElse"],["editMode",""],["routerLink","/rule-management",1,"main-btn","primary-btn","rounded-btn","btn-hover","btn-sm"],[1,"lni","lni-chevron-left","mr-5"],[1,"row"],[3,"formGroup","ngSubmit"],[1,"col-lg-6"],[1,"card-style","mb-30"],[1,"divider"],[1,"input-style-1"],["type","text","formControlName","RULE_NAME",3,"ngClass"],[4,"ngIf"],[1,"form-check","form-switch","toggle-switch","mb-30"],["formControlName","USER_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["for","toggleSwitch1",1,"form-check-label"],["formControlName","ACTIVITY_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","CONTENT_MGMT","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","LEADERBOARDS_PAGE","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","PIPELINES_PAGE","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["formControlName","REVENUE_LEADERBOARD","type","checkbox","id","toggleSwitch1",1,"form-check-input"],["routerLink","/rule-management",1,"main-btn","primary-btn-outline","rounded-btn","btn-hover","btn-sm"],[1,"main-btn","primary-btn","rounded-btn","btn-hover","btn-sm",3,"disabled"],[1,"mr-40"],["style","color:red",4,"ngIf"],[2,"color","red"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0),e.YNc(1,b,3,0,"div",1),e.YNc(2,_,2,0,"ng-template",null,2,e.W1O),e.TgZ(4,"button",3),e._UZ(5,"i",4),e._uU(6,"Back"),e.qZA()(),e.TgZ(7,"div",5)(8,"form",6),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(9,"div",7)(10,"div",8)(11,"h5"),e._uU(12,"Rule Description"),e.qZA(),e.TgZ(13,"span",9),e._UZ(14,"hr"),e.qZA(),e.TgZ(15,"div",10)(16,"label"),e._uU(17," Role Name "),e.qZA(),e._UZ(18,"input",11),e.YNc(19,R,2,1,"div",12),e.qZA(),e.TgZ(20,"span",9),e._UZ(21,"hr"),e.qZA(),e.TgZ(22,"h5"),e._uU(23,"Rule Privileges"),e.qZA(),e.TgZ(24,"span",9),e._UZ(25,"hr"),e.qZA(),e.TgZ(26,"div",13),e._UZ(27,"input",14),e.TgZ(28,"label",15),e._uU(29,"User Management"),e.qZA()(),e.TgZ(30,"div",13),e._UZ(31,"input",16),e.TgZ(32,"label",15),e._uU(33,"Activity Management"),e.qZA()(),e.TgZ(34,"div",13),e._UZ(35,"input",17),e.TgZ(36,"label",15),e._uU(37,"Content Management"),e.qZA()(),e.TgZ(38,"div",13),e._UZ(39,"input",18),e.TgZ(40,"label",15),e._uU(41,"Access Leaderboards"),e.qZA()(),e.TgZ(42,"div",13),e._UZ(43,"input",19),e.TgZ(44,"label",15),e._uU(45,"View Pipelines"),e.qZA()(),e.TgZ(46,"div",13),e._UZ(47,"input",20),e.TgZ(48,"label",15),e._uU(49,"View BP's Revenue Leaderboards"),e.qZA()(),e.TgZ(50,"span",9),e._UZ(51,"hr"),e.qZA(),e.TgZ(52,"div")(53,"button",21),e._uU(54," Cancel "),e.qZA(),e._uU(55,"\xa0 "),e.TgZ(56,"button",22),e.YNc(57,M,1,0,"span",12),e._uU(58," \xa0Save\xa0 "),e.qZA()()()()()()),2&n){const a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!i.id)("ngIfElse",a),e.xp6(7),e.Q6J("formGroup",i.form),e.xp6(10),e.Q6J("ngClass",e.VKq(7,U,i.submitted&&i.f.RULE_NAME.errors)),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.f.RULE_NAME.errors),e.xp6(37),e.Q6J("disabled",i.loading),e.xp6(1),e.Q6J("ngIf",i.loading)}},directives:[d.O5,s.rH,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,d.mk,o.Wl],encapsulation:2}),t})(),E=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,i){1&n&&e._UZ(0,"router-outlet")},directives:[s.lC],encapsulation:2}),t})();var C=l(2454),x=l.n(C),y=l(1914),c=l(8567),Z=l(3189);function S(t,r){1&t&&(e.TgZ(0,"span"),e._UZ(1,"i",29),e.qZA())}function L(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"div",23)(3,"button",24),e._UZ(4,"i",25),e.qZA(),e._uU(5,"\xa0 "),e.TgZ(6,"button",26),e.NdJ("click",function(){const u=e.CHM(n).$implicit;return e.oxw().confirmBox("delete",u)}),e.YNc(7,S,2,0,"span",27),e.qZA()()(),e.TgZ(8,"td",28)(9,"p"),e._uU(10),e.qZA()()()}if(2&t){const n=r.$implicit;e.xp6(3),e.MGl("routerLink","edit/",n.RULE_ID,""),e.xp6(3),e.Q6J("disabled",n.isDeleting),e.xp6(1),e.Q6J("ngIf",!n.isDeleting),e.xp6(3),e.Oqu(n.RULE_NAME)}}const N=function(t,r){return{itemsPerPage:t,currentPage:r}},I=[{path:"rule-management",component:E,children:[{path:"",component:(()=>{class t{constructor(n,i){this.service=n,this.alertService=i,this.rules=null,this.subs=new p.Y,this.p=1,this.count=10,this.countdata=null}ngOnInit(){this.subs.add(this.service.getAll().subscribe(n=>{this.rules=n,this.countdata=this.rules.length}))}deleteRule(n){this.alertService.loading();const i=this.rules.find(a=>a.RULE_ID===n.RULE_ID);this.subs.add(this.service.delete(n.RULE_ID).subscribe(()=>{i.isDeleting=!0,this.rules=this.rules.filter(a=>a.RULE_ID!==n.RULE_ID),this.countdata=this.rules.length,this.alertService.success()},a=>{this.alertService.error(a)}))}confirmBox(n,i){"delete"==n&&x().fire({title:"Are you sure want to delete?",text:i.RULE_NAME,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes!",cancelButtonText:"Cancel"}).then(a=>{a.value&&this.deleteRule(i)})}ngOnDestroy(){this.subs.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(h.P),e.Y36(y.c9))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-rule-management"]],decls:44,vars:12,consts:[[1,"title","d-flex","align-items-center","flex-wrap","mb-30"],[1,"mr-40"],["routerLink","add",1,"main-btn","primary-btn","btn-hover","btn-sm"],[1,"lni","lni-plus","mr-5"],[1,"row"],[1,"col-lg-12"],[1,"card-style","mb-30"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","py-3"],[1,"left"],[1,"right"],[1,"table-search","d-flex"],["action","#"],["type","text","name","something","placeholder","Search...",3,"ngModel","ngModelChange"],[1,"lni","lni-search-alt"],[1,"table-wrapper","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"pt-10","d-flex","flex-wrap","justify-content-between"],[1,"text-sm","text-gray"],[1,"text-right"],[3,"pageChange"],[1,"action"],[1,"text-primary",2,"cursor","pointer",3,"routerLink"],[1,"lni","lni-pencil-alt"],[1,"text-danger",3,"disabled","click"],[4,"ngIf"],[1,"min-width"],[1,"lni","lni-trash-can"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Rule Management"),e.qZA(),e.TgZ(3,"button",2),e._UZ(4,"i",3),e._uU(5," Add "),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),e._UZ(10,"div",8),e.qZA(),e.TgZ(11,"div",9)(12,"div",10)(13,"p"),e._uU(14,"Show "),e.TgZ(15,"span"),e._uU(16,"10"),e.qZA(),e._uU(17," entries"),e.qZA()(),e.TgZ(18,"div",11)(19,"div",12)(20,"form",13)(21,"input",14),e.NdJ("ngModelChange",function(u){return i.filterdata=u}),e.qZA(),e.TgZ(22,"button"),e._UZ(23,"i",15),e.qZA()()()()(),e.TgZ(24,"div",16)(25,"table",17)(26,"thead")(27,"tr")(28,"th")(29,"h6"),e._uU(30,"Action"),e.qZA()(),e.TgZ(31,"th")(32,"h6"),e._uU(33,"Rule Name"),e.qZA()()()(),e.TgZ(34,"tbody"),e.YNc(35,L,11,4,"tr",18),e.ALo(36,"paginate"),e.ALo(37,"filter"),e.qZA()()(),e.TgZ(38,"div",19)(39,"div",10)(40,"p",20),e._uU(41),e.qZA()(),e.TgZ(42,"div",21)(43,"pagination-controls",22),e.NdJ("pageChange",function(u){return i.p=u}),e.qZA()()()()()()),2&n&&(e.xp6(21),e.Q6J("ngModel",i.filterdata),e.xp6(14),e.Q6J("ngForOf",e.xi3(36,3,e.xi3(37,6,i.rules,i.filterdata),e.WLB(9,N,i.count,i.p))),e.xp6(6),e.hij("Total ",i.countdata," Rule Data"))},directives:[s.rH,o._Y,o.JL,o.F,o.Fj,o.JJ,o.On,d.sg,d.O5,c.LS],pipes:[c._s,Z.Z],styles:[""]}),t})()},{path:"add",component:f},{path:"edit/:id",component:f}]}];let q=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[s.Bz.forChild(I)],s.Bz]}),t})(),w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[d.ez,q,o.UX,o.u5,c.JX,Z.h]]}),t})()}}]);